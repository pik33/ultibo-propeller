' 
' 
' hdmi_base       = 48             'must be a multiple of 8
con
	hdmi_base = 48
' _clkfreq        = 245_000_000    'start safe, hubset will do the rest. The clock will be changed to:
	_clkfreq = 245000000
' 
' ' 354_689_500   200x Atari 8-bit PAL,  50x Amiga PAL  - real settings: 49,869-> 354_693_878  - 1.0000123 - mode 0 and 192
' ' 357_954_500   200x Atari 8-bit NTSC, 50x Amiga NTSC - real settings: 49,877-> 357_959_184  - 1.0000131 - mode 256
' 
' ' 319_220_550   180x PAL  - real settings: 51,814-> 319_215_686 - 0.9999848 - mode 64
' ' 322_159_050   180x NTSC - real settings: 37,596-> 322_162_162 - 1.0000097 - mode 320 and 448
' 
' ' 283_751_600   160x PAL  - real settings: 64,908-> 283_750_000 - 0.9999944 - mode 128
' ' 286_363_600   160x NTSC - real settings: 22,315-> 286_363_636 - 1.0000001 - mode 384
' 
' ''--------- VGA DOS color definition constants
' 
' c_black         =    0
	c_black = 0
' c_blue          =  117
	c_blue = 117
' c_green         =  199
	c_green = 199
' c_cyan          =  149
	c_cyan = 149
' c_red           =   39
	c_red = 39
' c_magenta       =   71
	c_magenta = 71
' c_brown         =  246
	c_brown = 246
' c_lightgray     =   10
	c_lightgray = 10
' c_darkgray      =    5
	c_darkgray = 5
' c_lightblue     =  121
	c_lightblue = 121
' c_lightgreen    =  203
	c_lightgreen = 203
' c_lightcyan     =  155
	c_lightcyan = 155
' c_lightred      =   43
	c_lightred = 43
' c_lightmagenta  =   75
	c_lightmagenta = 75
' c_yellow        =  234
	c_yellow = 234
' c_white         =   15
	c_white = 15
' 
' timingsxxt      =  $70810000
	timingsxxt = 1887502336
dat
	nop
	cogid	pa
	coginit	pa,##$404
	orgh	$10
	long	0	'reserved
	long	0 ' clock frequency: will default to 245000000
	long	0 ' clock mode: will default to $10c30fb
	orgh	$400
 _ret_	mov	result1, #0
	org	0
entry
	cmp	ptra, #0 wz
 if_ne	jmp	#spininit
	mov	ptra, objptr
	add	ptra, #232
	rdlong	pa, #20 wz
 if_ne	jmp	#skip_clock_set_
	hubset	#0
	hubset	##17576184
	waitx	##200000
	mov	pa, ##17576187
	hubset	pa
	wrlong	pa, #24
	wrlong	##245000000, #20
	jmp	#skip_clock_set_
	orgf	128
skip_clock_set_
	call	#_dummy
cogexit
	waitx	##160000
	cogid	arg01
	cogstop	arg01
spininit
	rdlong	objptr, ptra
	add	ptra, #4
	rdlong	result1, ptra
	add	ptra, #4
	rdlong	arg01, ptra
	add	ptra, #4
	rdlong	arg02, ptra
	add	ptra, #4
	rdlong	arg03, ptra
	add	ptra, #4
	rdlong	arg04, ptra
	sub	ptra, #16
	call	result1
	jmp	#cogexit
FCACHE_LOAD_
    pop	fcache_tmpb_
    add	fcache_tmpb_, pa
    push	fcache_tmpb_
    sub	fcache_tmpb_, pa
    shr	pa, #2
    altd	pa
    mov	 0-0, ret_instr_
    sub	pa, #1
    setq	pa
    rdlong	$0, fcache_tmpb_
    jmp	#\$0 ' jmp to cache
ret_instr_
    ret
fcache_tmpb_
    long 0
COUNT_
    long 0
RETADDR_
    long 0
fp
    long 0
pushregs_
    pop  pa
    pop  RETADDR_
    tjz  COUNT_, #pushregs_done_
    sub  COUNT_, #1
    setq COUNT_
    wrlong local01, ptra
    add  COUNT_, #1
pushregs_done_
    shl  COUNT_, #2
    add  ptra, COUNT_
    shr  COUNT_, #2
    setq #2 ' push 3 registers starting at COUNT_
    wrlong COUNT_, ptra
    add    ptra, #12
    mov    fp, ptra
    jmp  pa
 popregs_
    pop    pa
    sub    ptra, #12
    setq   #2
    rdlong COUNT_, ptra
    tjz    COUNT_, #popregs__ret
    shl    COUNT_, #2
    sub    ptra, COUNT_
    shr    COUNT_, #2
    sub    COUNT_, #1
    setq   COUNT_
    rdlong local01, ptra
popregs__ret
    push   RETADDR_
    jmp    pa

unsdivide_
       setq    #0
       qdiv    muldiva_, muldivb_
       getqx   muldivb_
 _ret_ getqy   muldiva_

divide_
       abs     muldiva_,muldiva_     wc       'abs(x)
       muxc    itmp2_,#%11                    'store sign of x
       abs     muldivb_,muldivb_     wcz      'abs(y)
 if_c  xor     itmp2_,#%10                    'store sign of y
 if_z  ret
       call    #unsdivide_
       test    itmp2_,#1        wc       'restore sign, remainder
       negc    muldiva_,muldiva_ 
       test    itmp2_,#%10      wc       'restore sign, division result
 _ret_ negc    muldivb_,muldivb_

itmp1_
	long	0
itmp2_
	long	0
objptr
	long	@objmem
ptr__dat__
	long	@_dat_
result1
	long	0
COG_BSS_START
	fit	480
	orgh
hubentry

' 
' 
' ''--------- timings
' ' 0  m_bs        - before sync,             16      80
' ' 1  m_sn        - sync                     80     160
' ' 2  m_bv        - before visible           20      84
' ' 3  m_vi        - visible                1024     816
' ' 4  m_border    - left and right borders  112       8
' ' 5  m_lut1      - pixels per char           8       8
' ' 6  i_vborder   - up and down border       48       8
' ' 7  i_upporch   - up non visible           16       8
' ' 8  i_vsync     - vsync                    16      12
' ' 9  i_downporch - down non visible         16       8
' '10  mode #
' '11  cpl         - character per line
' '12  scanlines #
' '13  clock
' '14  hubset value for clock settings
' 
' 
' '*************************************************************************
' '                                                                        *
' '  A dummy start function if someone runs this driver alone              *
' '                                                                        *
' '*************************************************************************
' 
' pub dummy()|i,x,y,ntsc,bbb,ccc,zzx,zzy,amode,x1,x2,y1,y2,r
_dummy
	mov	COUNT_, #24
	call	#pushregs_
' '' this is not a main program.
' 
' start(4096,hdmi_base)
	decod	arg01, #12
	mov	arg02, #48
	add	objptr, #44
	mov	local01, objptr
' 
' ' initialize pointers and variables
' 
' border_ptr:=@bordercolor
	sub	objptr, #36
	wrlong	local01, objptr
	add	ptr__dat__, ##4096
' font_ptr:=@st_font
	sub	objptr, #4
	wrlong	ptr__dat__, objptr
' hdmibase:=base
	add	objptr, #32
	wrlong	#48, objptr
	sub	objptr, #36
' 
' ' the mode has to be set here to enable computing the buffer length
' 
' setmode(mode)
	sub	ptr__dat__, ##4096
	call	#_setmode
	add	objptr, #64
	mov	local02, objptr
' 
' vblank_ptr:=@vblank
	sub	objptr, #52
	wrlong	local02, objptr
	add	objptr, #40
	mov	local03, objptr
' cursor_ptr:=@cursor_x
	sub	objptr, #36
	wrlong	local03, objptr
	add	objptr, #136
	mov	local04, objptr
' 
' fontnum_ptr:=@fontnum
	sub	objptr, #120
	wrlong	local04, objptr
' 
' fontnum:=0  ' PC type font ' TODO: font# in buffer byte #1
	add	objptr, #120
	wrlong	#0, objptr
	add	objptr, #28
	mov	arg01, objptr
	sub	objptr, #180
	add	ptr__dat__, ##7832
	mov	arg02, ptr__dat__
	sub	ptr__dat__, ##7832
' bytemove(@colors,@vgacolors,16)
	mov	arg03, #16
	call	#__system____builtin_memmove
' 
' ' initialize a cursor
' 
' cursor_x:=0
	add	objptr, #52
	wrbyte	#0, objptr
' cursor_y:=0
	add	objptr, #1
	wrbyte	#0, objptr
' cursor_sh:=14
	add	objptr, #1
	wrbyte	#14, objptr
	sub	objptr, #54
' 
' 
' ' start the cog
' 
' cog:=coginit(16,@hdmi, @buf_ptr)
	add	ptr__dat__, ##7848
	mov	arg02, ptr__dat__
	sub	ptr__dat__, ##7848
	mov	arg03, objptr
	mov	arg01, #16
	setq	arg03
	coginit	arg01, arg02 wc
 if_b	neg	arg01, #1
	mov	result1, arg01
	mov	local05, result1
	add	objptr, #40
	wrlong	local05, objptr
	sub	objptr, #40
' waitms(20)
	mov	arg01, #20
	call	#__system___waitms
' 
' ' clear the screen and set the colors to green on black
' 
' cls(c_green,c_black)
	mov	arg01, #199
	mov	arg02, #0
	call	#_cls
' setbordercolor(0,0,128)
	decod	arg03, #15
' 
' color:=r<<24+g<<16+b<<8
' bordercolor:=color
	add	objptr, #44
	wrlong	##32768, objptr
' setwritecolors(c_green,c_black)
' 
' 
' write_color:=ff
	add	objptr, #12
	wrlong	#199, objptr
' write_background:=bb
	add	objptr, #4
	wrlong	#0, objptr
' 
' return cog
	sub	objptr, #20
	rdlong	result1, objptr
	sub	objptr, #40
' 
' cls(11,3)
	mov	arg01, #11
	mov	arg02, #3
	call	#_cls
' setfontfamily(0)
' 
' font_family:=afontnum
	add	objptr, #200
	wrlong	#0, objptr
	sub	objptr, #200
' waitvbl(100)
	mov	arg01, #100
	call	#_waitvbl
' outtextxycg(0,0,inttostr(long[0]),11,3)
	mov	local06, #0
	mov	local07, #0
	rdlong	arg01, #0
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #11
	mov	arg05, #3
	call	#_outtextxycg
' waitvbl(100)
	mov	arg01, #100
	call	#_waitvbl
' 
' repeat i from 1 to 200
	mov	local08, #1
LR__0001
'   putpixel(i,i,14)
	mov	arg01, local08
	mov	arg02, local08
	mov	arg03, #14
	call	#_putpixel
	add	local08, #1
	cmps	local08, #201 wcz
 if_b	jmp	#LR__0001
' fcircle(200,200,100,14)
	mov	arg01, #200
	mov	arg02, #200
	mov	arg03, #100
	mov	arg04, #14
	call	#_fcircle
' line(300,300,400,200,13)
	mov	arg01, #300
	mov	arg02, #300
	mov	arg03, #400
	mov	arg04, #200
	mov	arg05, #13
	call	#_line
' waitvbl(100) 
	mov	arg01, #100
	call	#_waitvbl
' 
' repeat i from 0 to 479
	mov	local08, #0
LR__0002
	mov	arg05, local08
	and	arg05, #15
'   ccc:=i&15
'   line(0,i,399,i,ccc)
	mov	arg01, #0
	mov	arg02, local08
	mov	arg03, #399
	mov	arg04, local08
	call	#_line
	add	local08, #1
	cmps	local08, #480 wcz
 if_b	jmp	#LR__0002
'   
' 
' 
' repeat i from 0 to 1000
	mov	local08, ##1001
LR__0003
' 
'   x1:=getrnd()+//800
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, ##800
	call	#unsdivide_
	mov	local09, muldiva_
'   y1:=getrnd()+//480
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #480
	call	#unsdivide_
	mov	local10, muldiva_
'   r:=getrnd()+//100
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #100
	call	#unsdivide_
'   ccc:=getrnd()&15
	getrnd	result1
	mov	arg04, result1
	and	arg04, #15
'   fcircle(x1,y1,r,ccc)   
	mov	arg01, local09
	mov	arg02, local10
	mov	arg03, muldiva_
	call	#_fcircle
	djnz	local08, #LR__0003
' 
' repeat i from 0 to 10000
	mov	local08, ##10001
LR__0004
'   ccc:=getrnd()&15
	getrnd	local11
	and	local11, #15
'   x1:=getrnd()+//800
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, ##800
	call	#unsdivide_
	mov	local09, muldiva_
'   x2:=getrnd()+//800
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, ##800
	call	#unsdivide_
	mov	local12, muldiva_
'   y1:=getrnd()+//480
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #480
	call	#unsdivide_
	mov	local10, muldiva_
'   y2:=getrnd()+//480
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #480
	call	#unsdivide_
' 
' 
'   frame(x1,y1,x2,y2,ccc)
	mov	local13, local09
	mov	local14, local10
	mov	local15, local12
	mov	local16, muldiva_
	mov	local17, local11
' 
' line(x1,y1,x2,y1,c)
	mov	arg01, local13
	mov	arg02, local14
	mov	arg03, local15
	mov	arg04, local14
	mov	arg05, local17
	call	#_line
' line(x1,y2,x2,y2,c)
	mov	arg01, local13
	mov	arg02, local16
	mov	arg03, local15
	mov	arg04, local16
	mov	arg05, local17
	call	#_line
' line(x1,y1,x1,y2,c)
	mov	arg01, local13
	mov	arg02, local14
	mov	arg03, local13
	mov	arg04, local16
	mov	arg05, local17
	call	#_line
' line(x2,y1,x2,y2,c)
	mov	arg01, local15
	mov	arg02, local14
	mov	arg03, local15
	mov	arg04, local16
	mov	arg05, local17
	call	#_line
	djnz	local08, #LR__0004
'   
' repeat i from 0 to 10000
	mov	local08, ##10001
LR__0005
' 
'   x1:=getrnd()+//896
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, ##896
	call	#unsdivide_
	mov	local09, muldiva_
'   y1:=getrnd()+//496
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #496
	call	#unsdivide_
	mov	local10, muldiva_
'   r:=getrnd()+//100
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #100
	call	#unsdivide_
'   ccc:=getrnd()&15
	getrnd	result1
	mov	arg04, result1
	and	arg04, #15
'   circle(x1,y1,r,ccc) 
	mov	arg01, local09
	mov	arg02, local10
	mov	arg03, muldiva_
	call	#_circle
	djnz	local08, #LR__0005
'   
' repeat i from 0 to 1000
	mov	local08, ##1001
LR__0006
'   ccc:=getrnd()&15
	getrnd	local11
	and	local11, #15
'   x1:=getrnd()+//896
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, ##896
	call	#unsdivide_
	mov	local09, muldiva_
'   x2:=getrnd()+//100
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #100
	call	#unsdivide_
	mov	local12, muldiva_
'   y1:=getrnd()+//496
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #496
	call	#unsdivide_
	mov	local10, muldiva_
'   y2:=getrnd()+//100
	getrnd	result1
	mov	muldiva_, result1
	mov	muldivb_, #100
	call	#unsdivide_
	mov	local18, local09
	add	local18, local12
	mov	local19, local10
	add	local19, muldiva_
' 
' 
'   box(x1,y1,x1+x2,y1+y2,ccc)  
	mov	local20, local09
	mov	local21, local10
	mov	local22, local11
' 
' repeat yy from y1 to y2
	cmps	local19, local21 wcz
 if_a	mov	local23, #1
 if_be	neg	local23, #1
	add	local19, local23
LR__0007
'   line(x1,yy,x2,yy,c)
	mov	arg01, local20
	mov	arg03, local18
	mov	arg05, local22
	mov	arg02, local21
	mov	arg04, local21
	call	#_line
	add	local21, local23
	cmp	local21, local19 wz
 if_ne	jmp	#LR__0007
	djnz	local08, #LR__0006
'       
'   
' {
' }
' setfontfamily(4)
' 
' font_family:=afontnum
	add	objptr, #200
	wrlong	#4, objptr
	sub	objptr, #200
' repeat amode from 512 to 1023
	decod	local24, #9
LR__0008
'   setmode(amode)
	mov	arg01, local24
	call	#_setmode
	mov	local11, local24
	shr	local11, #4
	and	local11, #3 wz
'   ccc:=((amode>>4)&3)
'   if (ccc==0)
 if_ne	jmp	#LR__0009
'     cls(0,1)
	mov	arg01, #0
	mov	arg02, #1
	call	#_cls
'     outtextxycg(0,0,string("mode"),0,1)
	mov	arg03, ##@LR__0126
	mov	arg01, #0
	mov	arg02, #0
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(0,16,string("cpl"),0,1)
	mov	arg03, ##@LR__0127
	mov	arg01, #0
	mov	arg02, #16
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(0,32,string("bufptr"),0,1)
	mov	arg03, ##@LR__0128
	mov	arg01, #0
	mov	arg02, #32
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(0,48,string("buflen"),0,1)
	mov	arg03, ##@LR__0129
	mov	arg01, #0
	mov	arg02, #48
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(0,64,string("lines"),0,1)
	mov	arg03, ##@LR__0130
	mov	arg01, #0
	mov	arg02, #64
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(64,0,inttostr(amode),0,1)
	mov	local06, #64
	mov	local07, #0
	mov	arg01, local24
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(64,16,inttostr(cpl),0,1)
	mov	local06, #64
	mov	local07, #16
	add	objptr, #144
	rdlong	arg01, objptr
	sub	objptr, #144
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(64,32,inttostr(buf_ptr),0,1)
	mov	local06, #64
	mov	local07, #32
	rdlong	arg01, objptr
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
	add	objptr, #48
	rdlong	arg01, objptr
	sub	objptr, #48
	shl	arg01, #2
'     outtextxycg(64,48,inttostr(buflen*4),0,1)
	mov	local06, #64
	mov	local07, #48
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
'     outtextxycg(64,64,inttostr(lines),0,1)
	mov	local06, #64
	mov	local07, #64
	add	objptr, #148
	rdlong	arg01, objptr
	sub	objptr, #148
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #0
	mov	arg05, #1
	call	#_outtextxycg
	jmp	#LR__0015
LR__0009
'   elseif (ccc==1)
	cmp	local11, #1 wz
 if_ne	jmp	#LR__0010
'     cls(0,0)
	mov	arg01, #0
	mov	arg02, #0
	call	#_cls
'     outtextxycg(0,0,string("mode"),3,0)
	mov	arg03, ##@LR__0131
	mov	arg01, #0
	mov	arg02, #0
	mov	arg04, #3
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,16,string("cpl"),3,0)'
	mov	arg03, ##@LR__0132
	mov	arg01, #0
	mov	arg02, #16
	mov	arg04, #3
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,32,string("buf_ptr"),3,0)
	mov	arg03, ##@LR__0133
	mov	arg01, #0
	mov	arg02, #32
	mov	arg04, #3
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,48,string("buflen"),3,0)
	mov	arg03, ##@LR__0134
	mov	arg01, #0
	mov	arg02, #48
	mov	arg04, #3
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,64,string("lines"),3,0)
	mov	arg03, ##@LR__0135
	mov	arg01, #0
	mov	arg02, #64
	mov	arg04, #3
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,0,inttostr(amode),2,0)
	mov	local06, #64
	mov	local07, #0
	mov	arg01, local24
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #2
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,16,inttostr(cpl),2,0)
	mov	local06, #64
	mov	local07, #16
	add	objptr, #144
	rdlong	arg01, objptr
	sub	objptr, #144
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #2
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,32,inttostr(buf_ptr),2,0)
	mov	local06, #64
	mov	local07, #32
	rdlong	arg01, objptr
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #2
	mov	arg05, #0
	call	#_outtextxycg
	add	objptr, #48
	rdlong	arg01, objptr
	sub	objptr, #48
	shl	arg01, #2
'     outtextxycg(64,48,inttostr(buflen*4),2,0)
	mov	local06, #64
	mov	local07, #48
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #2
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,64,inttostr(lines),2,0)
	mov	local06, #64
	mov	local07, #64
	add	objptr, #148
	rdlong	arg01, objptr
	sub	objptr, #148
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #2
	mov	arg05, #0
	call	#_outtextxycg
	jmp	#LR__0014
LR__0010
'   elseif (ccc==2)
	cmp	local11, #2 wz
 if_ne	jmp	#LR__0011
'     cls(0,0)
	mov	arg01, #0
	mov	arg02, #0
	call	#_cls
'     outtextxycg(0,0,string("mode"),9,0)
	mov	arg03, ##@LR__0136
	mov	arg01, #0
	mov	arg02, #0
	mov	arg04, #9
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,16,string("cpl"),9,0)'
	mov	arg03, ##@LR__0137
	mov	arg01, #0
	mov	arg02, #16
	mov	arg04, #9
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,32,string("buf_ptr"),9,0)
	mov	arg03, ##@LR__0138
	mov	arg01, #0
	mov	arg02, #32
	mov	arg04, #9
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,48,string("buflen"),9,0)
	mov	arg03, ##@LR__0139
	mov	arg01, #0
	mov	arg02, #48
	mov	arg04, #9
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,64,string("lines"),9,0)
	mov	arg03, ##@LR__0140
	mov	arg01, #0
	mov	arg02, #64
	mov	arg04, #9
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,0,inttostr(amode),4,0)
	mov	local06, #64
	mov	local07, #0
	mov	arg01, local24
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #4
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,16,inttostr(cpl),4,0)
	mov	local06, #64
	mov	local07, #16
	add	objptr, #144
	rdlong	arg01, objptr
	sub	objptr, #144
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #4
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,32,inttostr(buf_ptr),4,0)
	mov	local06, #64
	mov	local07, #32
	rdlong	arg01, objptr
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #4
	mov	arg05, #0
	call	#_outtextxycg
	add	objptr, #48
	rdlong	arg01, objptr
	sub	objptr, #48
	shl	arg01, #2
'     outtextxycg(64,48,inttostr(buflen*4),4,0)
	mov	local06, #64
	mov	local07, #48
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #4
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,64,inttostr(lines),4,0)
	mov	local06, #64
	mov	local07, #64
	add	objptr, #148
	rdlong	arg01, objptr
	sub	objptr, #148
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #4
	mov	arg05, #0
	call	#_outtextxycg
	jmp	#LR__0013
LR__0011
'   elseif (ccc==3)
	cmp	local11, #3 wz
 if_ne	jmp	#LR__0012
'     cls(0,0)
	mov	arg01, #0
	mov	arg02, #0
	call	#_cls
'     outtextxycg(0,0,string("mode"),120,0)
	mov	arg03, ##@LR__0141
	mov	arg01, #0
	mov	arg02, #0
	mov	arg04, #120
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,16,string("cpl"),120,0)'
	mov	arg03, ##@LR__0142
	mov	arg01, #0
	mov	arg02, #16
	mov	arg04, #120
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,32,string("buf_ptr"),120,0)
	mov	arg03, ##@LR__0143
	mov	arg01, #0
	mov	arg02, #32
	mov	arg04, #120
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,48,string("buflen"),120,0)
	mov	arg03, ##@LR__0144
	mov	arg01, #0
	mov	arg02, #48
	mov	arg04, #120
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(0,64,string("lines"),120,0)
	mov	arg03, ##@LR__0145
	mov	arg01, #0
	mov	arg02, #64
	mov	arg04, #120
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,0,inttostr(amode),40,0)
	mov	local06, #64
	mov	local07, #0
	mov	arg01, local24
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #40
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,16,inttostr(cpl),40,0)
	mov	local06, #64
	mov	local07, #16
	add	objptr, #144
	rdlong	arg01, objptr
	sub	objptr, #144
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #40
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,32,inttostr(buf_ptr),40,0)
	mov	local06, #64
	mov	local07, #32
	rdlong	arg01, objptr
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #40
	mov	arg05, #0
	call	#_outtextxycg
	add	objptr, #48
	rdlong	arg01, objptr
	sub	objptr, #48
	shl	arg01, #2
'     outtextxycg(64,48,inttostr(buflen*4),40,0)
	mov	local06, #64
	mov	local07, #48
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #40
	mov	arg05, #0
	call	#_outtextxycg
'     outtextxycg(64,64,inttostr(lines),40,0)
	mov	local06, #64
	mov	local07, #64
	add	objptr, #148
	rdlong	arg01, objptr
	sub	objptr, #148
	call	#_inttostr
	mov	arg03, result1
	mov	arg01, local06
	mov	arg02, local07
	mov	arg04, #40
	mov	arg05, #0
	call	#_outtextxycg
LR__0012
LR__0013
LR__0014
LR__0015
'   waitvbl(300)
	mov	arg01, #300
	call	#_waitvbl
	add	local24, #1
	cmps	local24, ##1024 wcz
 if_b	jmp	#LR__0008
' 
' repeat
LR__0016
	jmp	#LR__0016
	mov	ptra, fp
	call	#popregs_
_dummy_ret
	ret

' 
' '------------------------------
' 
' pub fcircle(x0,y0,r,c) | d,x,y,da,db
_fcircle
	mov	COUNT_, #13
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, arg03
	mov	local04, arg04
	mov	local05, local03
	shl	local05, #2
	mov	local06, #5
	sub	local06, local05
' 
' d:=5-4*r
' x:=0
	mov	local07, #0
' y:=r
	qmul	local03, ##-2
	getqx	local08
	add	local08, #5
	shl	local08, #2
' da:=(-2*r+5)*4
' db:=3*4
	mov	local09, #12
' repeat while (x<=y) 
LR__0017
	cmps	local07, local03 wcz
 if_a	jmp	#LR__0019
	mov	local10, local01
	sub	local10, local07
	mov	arg04, local02
	sub	arg04, local03
	mov	local11, local01
	add	local11, local07
'   line(x0-x,y0-y,x0+x,y0-y,c)
	mov	arg01, local10
	mov	arg02, arg04
	mov	arg03, local11
	mov	arg05, local04
	call	#_line
	mov	arg04, local02
	add	arg04, local03
'   line(x0-x,y0+y,x0+x,y0+y,c)
	mov	arg01, local10
	mov	arg02, arg04
	mov	arg03, local11
	mov	arg05, local04
	call	#_line
	mov	local12, local01
	sub	local12, local03
	mov	arg04, local02
	sub	arg04, local07
	mov	local13, local01
	add	local13, local03
'   line(x0-y,y0-x,x0+y,y0-x,c)
	mov	arg01, local12
	mov	arg02, arg04
	mov	arg03, local13
	mov	arg05, local04
	call	#_line
	mov	arg04, local02
	add	arg04, local07
'   line(x0-y,y0+x,x0+y,y0+x,c)
	mov	arg01, local12
	mov	arg02, arg04
	mov	arg03, local13
	mov	arg05, local04
	call	#_line
'   if d>0 
	cmps	local06, #0 wcz
 if_be	jmp	#LR__0018
'     d+=da
	add	local06, local08
'     y-=1
	sub	local03, #1
'     x+=1
	add	local07, #1
'     da+=4*4
	add	local08, #16
'     db+=2*4
	add	local09, #8
'   else
	jmp	#LR__0017
LR__0018
'     d+=db
	add	local06, local09
'     x+=1
	add	local07, #1
'     da+=2*4
	add	local08, #8
'     db+=2*4
	add	local09, #8
	jmp	#LR__0017
LR__0019
	mov	ptra, fp
	call	#popregs_
_fcircle_ret
	ret

'  
'  
'  
' pub circle(x0,y0,r,c) | d,x,y,da,db
_circle
	mov	COUNT_, #17
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, arg03
	mov	local04, arg04
	mov	local05, local03
	shl	local05, #2
	mov	local06, #5
	sub	local06, local05
' 
'  
' d:=5-4*r
' x:=0
	mov	local07, #0
' y:=r
	qmul	local03, ##-2
	getqx	local08
	add	local08, #5
	shl	local08, #2
' da:=(-2*r+5)*4
' db:=3*4
	mov	local09, #12
' repeat while (x<=y) 
LR__0020
	cmps	local07, local03 wcz
 if_a	jmp	#LR__0022
	mov	local10, local01
	sub	local10, local07
	mov	local11, local02
	sub	local11, local03
'   putpixel(x0-x,y0-y,c)
	mov	arg01, local10
	mov	arg02, local11
	mov	arg03, local04
	call	#_putpixel
	mov	local12, local02
	add	local12, local03
'   putpixel(x0-x,y0+y,c)
	mov	arg01, local10
	mov	arg02, local12
	mov	arg03, local04
	call	#_putpixel
	mov	local13, local01
	add	local13, local07
'   putpixel(x0+x,y0-y,c)
	mov	arg01, local13
	mov	arg02, local11
	mov	arg03, local04
	call	#_putpixel
'   putpixel(x0+x,y0+y,c)
	mov	arg01, local13
	mov	arg02, local12
	mov	arg03, local04
	call	#_putpixel
	mov	local14, local01
	sub	local14, local03
	mov	local15, local02
	sub	local15, local07
'   putpixel(x0-y,y0-x,c)
	mov	arg01, local14
	mov	arg02, local15
	mov	arg03, local04
	call	#_putpixel
	mov	local16, local02
	add	local16, local07
'   putpixel(x0-y,y0+x,c)
	mov	arg01, local14
	mov	arg02, local16
	mov	arg03, local04
	call	#_putpixel
	mov	local17, local01
	add	local17, local03
'   putpixel(x0+y,y0-x,c)
	mov	arg01, local17
	mov	arg02, local15
	mov	arg03, local04
	call	#_putpixel
'   putpixel(x0+y,y0+x,c)
	mov	arg01, local17
	mov	arg02, local16
	mov	arg03, local04
	call	#_putpixel
'   if d>0 
	cmps	local06, #0 wcz
 if_be	jmp	#LR__0021
'     d+=da
	add	local06, local08
'     y-=1
	sub	local03, #1
'     x+=1
	add	local07, #1
'     da+=4*4
	add	local08, #16
'     db+=2*4
	add	local09, #8
'   else
	jmp	#LR__0020
LR__0021
'     d+=db
	add	local06, local09
'     x+=1
	add	local07, #1
'     da+=2*4
	add	local08, #8
'     db+=2*4
	add	local09, #8
	jmp	#LR__0020
LR__0022
	mov	ptra, fp
	call	#popregs_
_circle_ret
	ret

' 
' 
' pub line(x1,y1,x2,y2,c) | d,dx,dy,ai,bi,xi,yi,x,y
_line
	mov	COUNT_, #14
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, arg03
	mov	local04, arg04
	mov	local05, arg05
' 
' 
' x:=x1
	mov	local06, local01
' y:=y1
	mov	local07, local02
' 
' if (x1<x2) 
	cmps	local01, local03 wcz
 if_ae	jmp	#LR__0023
'   xi:=1
	mov	local08, #1
	mov	local09, local03
	sub	local09, local01
'   dx:=x2-x1
' else
	jmp	#LR__0024
LR__0023
'   xi:=-1
	neg	local08, #1
	sub	local01, local03
'   dx:=x1-x2
	mov	local09, local01
LR__0024
'   
' if (y1<y2) 
	cmps	local02, local04 wcz
 if_ae	jmp	#LR__0025
'   yi:=1
	mov	local10, #1
	mov	local11, local04
	sub	local11, local02
'   dy:=y2-y1
' else
	jmp	#LR__0026
LR__0025
'   yi:=-1
	neg	local10, #1
	sub	local02, local04
'   dy:=y1-y2
	mov	local11, local02
LR__0026
' 
' putpixel(x,y,c)
	mov	arg02, local07
	mov	arg03, local05
	mov	arg01, local06
	call	#_putpixel
' 
' if (dx>dy)
	cmps	local09, local11 wcz
 if_be	jmp	#LR__0030
	mov	local12, local11
	sub	local12, local09
	shl	local12, #1
'   ai:=(dy-dx)*2
	shl	local11, #1
	mov	local13, local11
'   bi:=dy*2
	mov	local14, local13
	sub	local14, local09
'   d:= bi-dx
'   repeat while (x<>x2) 
LR__0027
	cmp	local06, local03 wz
 if_e	jmp	#LR__0035
'     if (d>=0) 
	cmps	local14, #0 wcz
 if_b	jmp	#LR__0028
'       x+=xi
	add	local06, local08
'       y+=yi
	add	local07, local10
'       d+=ai
	add	local14, local12
'     else
	jmp	#LR__0029
LR__0028
'       d+=bi
	add	local14, local13
'       x+=xi
	add	local06, local08
LR__0029
'     putpixel(x,y,c)
	mov	arg01, local06
	mov	arg02, local07
	mov	arg03, local05
	call	#_putpixel
	jmp	#LR__0027
' else
LR__0030
	mov	local12, local09
	sub	local12, local11
	shl	local12, #1
'   ai:=(dx-dy)*2
	shl	local09, #1
	mov	local13, local09
'   bi:=dx*2
	mov	local14, local13
	sub	local14, local11
'   d:=bi-dy
'   repeat while (y<>y2)
LR__0031
	cmp	local07, local04 wz
 if_e	jmp	#LR__0034
'     if (d>=0)
	cmps	local14, #0 wcz
 if_b	jmp	#LR__0032
'       x+=xi
	add	local06, local08
'       y+=yi
	add	local07, local10
'       d+=ai
	add	local14, local12
'     else
	jmp	#LR__0033
LR__0032
'       d+=bi
	add	local14, local13
'       y+=yi
	add	local07, local10
LR__0033
'     putpixel(x, y,c)
	mov	arg01, local06
	mov	arg02, local07
	mov	arg03, local05
	call	#_putpixel
	jmp	#LR__0031
LR__0034
LR__0035
	mov	ptra, fp
	call	#popregs_
_line_ret
	ret

' 
' pub putcharxycg(x,y,achar,f,b) |xx, yy,bb
_putcharxycg
	mov	COUNT_, #11
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, arg03
	mov	local04, arg04
	mov	local05, arg05
	shl	local03, #4
	mov	local06, #0
LR__0036
	mov	local07, ptr__dat__
	add	objptr, #200
	rdlong	local08, objptr
	sub	objptr, #200
	shl	local08, #10
	add	local07, local08
	add	local07, local03
	add	local07, local06
'   bb:=byte[@vga_font+font_family<<10+achar<<4+yy]
	rdbyte	local09, local07
'   repeat xx from 0 to 7
	mov	local10, #0
LR__0037
'     if (bb&(1<<xx))<>0
	decod	local11, local10
	test	local09, local11 wz
 if_e	jmp	#LR__0038
	mov	arg01, local10
	add	arg01, local01
	mov	arg02, local06
	add	arg02, local02
'       putpixel(xx+x,yy+y,f)
	mov	arg03, local04
	call	#_putpixel
'     else
	jmp	#LR__0039
LR__0038
	mov	arg01, local10
	add	arg01, local01
	mov	arg02, local06
	add	arg02, local02
'       putpixel(xx+x,yy+y,b)
	mov	arg03, local05
	call	#_putpixel
LR__0039
	add	local10, #1
	cmps	local10, #8 wcz
 if_b	jmp	#LR__0037
	add	local06, #1
	cmps	local06, #16 wcz
 if_b	jmp	#LR__0036
	mov	ptra, fp
	call	#popregs_
_putcharxycg_ret
	ret

' 
' pub outtextxycg(x,y,text,f,b) | iii,c
_outtextxycg
	mov	COUNT_, #12
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, arg03
	mov	local04, arg04
	mov	local05, arg05
' 
' repeat iii from 0 to strsize(text)-1
	mov	local06, #0
	mov	arg01, local03
	mov	local07, #0
	loc	pa,	#(@LR__0041-@LR__0040)
	call	#FCACHE_LOAD_
LR__0040
	rdbyte	local08, arg01 wz
 if_ne	add	local07, #1
 if_ne	add	arg01, #1
 if_ne	jmp	#LR__0040
LR__0041
	mov	result1, local07
	mov	local09, result1
	sub	local09, #1
	cmps	local09, #0 wcz
 if_a	mov	local10, #1
 if_be	neg	local10, #1
	add	local09, local10
LR__0042
	mov	local11, local06
	shl	local11, #3
	mov	arg01, local01
	add	arg01, local11
	mov	local12, local03
	add	local12, local06
'   putcharxycg(x+8*iii,y,byte[text+iii],f,b)
	mov	arg02, local02
	rdbyte	arg03, local12
	mov	arg04, local04
	mov	arg05, local05
	call	#_putcharxycg
	add	local06, local10
	cmp	local06, local09 wz
 if_ne	jmp	#LR__0042
	mov	ptra, fp
	call	#popregs_
_outtextxycg_ret
	ret

' 
' 
' pub putpixel(x,y,c) |byte b
_putpixel
' 
' x:=lines-x
	add	objptr, #148
	rdlong	_var01, objptr
	sub	_var01, arg01
' if ((y>=0) & (y<16*cpl) & (x>=0) & (x<lines))
	mov	_var02, #0
	cmps	arg02, #0 wcz
 if_ae	neg	_var02, #1
	mov	_var03, #0
	sub	objptr, #4
	rdlong	_var04, objptr
	shl	_var04, #4
	cmps	arg02, _var04 wcz
 if_b	neg	_var03, #1
	and	_var02, _var03
	mov	_var05, #0
	cmps	_var01, #0 wcz
 if_ae	neg	_var05, #1
	and	_var02, _var05
	mov	_var06, #0
	add	objptr, #4
	rdlong	_var07, objptr
	sub	objptr, #148
	cmps	_var01, _var07 wcz
 if_b	neg	_var06, #1
	test	_var02, _var06 wz
 if_e	jmp	#LR__0043
	add	objptr, #144
	rdlong	_var08, objptr
	sub	objptr, #144
	shl	_var08, #2
	qmul	_var08, _var01
	getqx	_var09
	rdlong	_var10, objptr
	add	_var10, _var09
	mov	_var11, arg02
	shr	_var11, #1
	add	_var10, _var11
'     b:=byte[buf_ptr+4*cpl*x+(y>>1)]
	rdbyte	_var12, _var10
	abs	_var02, arg02 wc
	and	_var02, #1
 if_b	neg	_var02, _var02
	shl	_var02, #2
	mov	_var13, #15
	shl	_var13, _var02
'     
'     b:=b & !(%1111<<((y//2)<<2))
	andn	_var12, _var13
	shl	arg03, _var02
'     
'     b:=b |(c<<((y//2)<<2))
	or	_var12, arg03
	add	objptr, #144
	rdlong	_var14, objptr
	sub	objptr, #144
	shl	_var14, #2
	qmul	_var14, _var01
	getqx	_var15
	rdlong	_var16, objptr
	add	_var16, _var15
	add	_var16, _var11
'     byte[buf_ptr+4*cpl*x+(y>>1)]:=b
	wrbyte	_var12, _var16
LR__0043
_putpixel_ret
	ret

' 
' '*************************************************************************
' '                                                                        *
' '  VBlank functions                                                      *
' '                                                                        *
' '*************************************************************************
' 
' pub waitvbl(amount) | i
_waitvbl
	mov	COUNT_, #4
	call	#pushregs_
	mov	local01, arg01
' 
' ''---------- Wait for start of vblank. Amount=delay in frames
' 
' repeat i from 1 to amount
	mov	local02, #1
	cmps	local01, #1 wcz
 if_a	mov	local03, #1
 if_be	neg	local03, #1
	add	local01, local03
LR__0044
'   repeat until vblank==0
LR__0045
	add	objptr, #64
	rdlong	local04, objptr wz
	sub	objptr, #64
 if_e	jmp	#LR__0046
'     waitus(100)
	mov	arg01, #100
	call	#__system___waitus
	jmp	#LR__0045
LR__0046
'   repeat until vblank==1
LR__0047
	add	objptr, #64
	rdlong	local04, objptr
	sub	objptr, #64
	cmp	local04, #1 wz
 if_e	jmp	#LR__0048
'     waitus(100)
	mov	arg01, #100
	call	#__system___waitus
	jmp	#LR__0047
LR__0048
	add	local02, local03
	cmp	local02, local01 wz
 if_ne	jmp	#LR__0044
	mov	ptra, fp
	call	#popregs_
_waitvbl_ret
	ret

' 
' 
' '*************************************************************************
' '                                                                        *
' '  Text functions                                                        *
' '                                                                        *
' '*************************************************************************
' 
' ''---------- Clear the screen, set its foreground/background color
' 
' pub cls(fc,bc)   :c
_cls
	mov	COUNT_, #3
	call	#pushregs_
	mov	local01, arg01
	mov	local02, arg02
	mov	local03, local02
	shl	local03, #4
	add	local03, local02
' 
' c:=bc<<4+bc
	add	objptr, #48
	rdlong	arg03, objptr
	sub	objptr, #48
	shl	arg03, #2
' bytefill(buf_ptr,c,buflen*4)
	rdlong	arg01, objptr
	mov	arg02, local03
	call	#__system____builtin_memset
' setwritecolors(fc,bc)
' 
' 
' write_color:=ff
	add	objptr, #56
	wrlong	local01, objptr
' write_background:=bb
	add	objptr, #4
	wrlong	local02, objptr
' cursor_x:=0
	sub	objptr, #8
	wrbyte	#0, objptr
' cursor_y:=0
	add	objptr, #1
	wrbyte	#0, objptr
	sub	objptr, #53
	mov	result1, local03
	mov	ptra, fp
	call	#popregs_
_cls_ret
	ret

' 
' 
' '*************************************************************************
' '                                                                        *
' '  Conversions                                                           *
' '                                                                        *
' '*************************************************************************
' 
' ''---------- Convert a integer to dec string, return a pointer
' 
' pub inttostr(i):result |q,pos,k,j
_inttostr
	mov	COUNT_, #7
	call	#pushregs_
	mov	local01, arg01
' 
' j:=i
	mov	local02, local01 wz
' pos:=10
	mov	local03, #10
' k:=0
	mov	local04, #0
' 
' if (j==0)
 if_ne	jmp	#LR__0049
'   n_string[0]:=48
	add	objptr, #68
	wrbyte	#48, objptr
'   n_string[1]:=0
	add	objptr, #1
	wrbyte	#0, objptr
	sub	objptr, #69
' 
' else
	jmp	#LR__0056
LR__0049
'   if (j<0)
	cmps	local02, #0 wcz
'     j:=0-j
 if_b	neg	local02, local02
'     k:=45
 if_b	mov	local04, #45
' 
'   n_string[11]:=0
	add	objptr, #79
	wrbyte	#0, objptr
	sub	objptr, #79
	loc	pa,	#(@LR__0051-@LR__0050)
	call	#FCACHE_LOAD_
'   repeat while (pos>-1)
LR__0050
	cmps	local03, ##-1 wcz
 if_be	jmp	#LR__0052
	mov	muldiva_, local02
	mov	muldivb_, #10
	call	#divide_
	mov	local05, muldiva_
'     q:=j//10
'     q:=48+q
	add	local05, #48
	mov	local06, local03
	add	objptr, #68
	add	local06, objptr
'     n_string[pos]:=q
	wrbyte	local05, local06
'     j:=j/10
	mov	local02, muldivb_
'     pos-=1
	sub	local03, #1
	sub	objptr, #68
	jmp	#LR__0050
LR__0051
LR__0052
'   repeat while n_string[0]==48
LR__0053
	add	objptr, #68
	rdbyte	local07, objptr
	sub	objptr, #68
	cmp	local07, #48 wz
 if_ne	jmp	#LR__0054
	add	objptr, #68
	mov	arg01, objptr
	sub	objptr, #68
	mov	arg02, arg01
	add	arg02, #1
'     bytemove(@n_string,@n_string+1,12)
	mov	arg03, #12
	call	#__system____builtin_memmove
	jmp	#LR__0053
LR__0054
' 
'   if k==45
	cmp	local04, #45 wz
 if_ne	jmp	#LR__0055
	add	objptr, #68
	mov	arg02, objptr
	sub	objptr, #68
	mov	arg01, arg02
	add	arg01, #1
'      bytemove(@n_string+1,@n_string,12)
	mov	arg03, #12
	call	#__system____builtin_memmove
'      n_string[0]:=k
	add	objptr, #68
	wrbyte	local04, objptr
	sub	objptr, #68
LR__0055
LR__0056
	add	objptr, #68
	mov	result1, objptr
	sub	objptr, #68
' 
' q:=@n_string
' return q
	mov	ptra, fp
	call	#popregs_
_inttostr_ret
	ret

' 
' 
' 
' '*************************************************************************
' '                                                                        *
' '  Mode setting and driver start                                                          *
' '                                                                        *
' '*************************************************************************
' 
' ''---------  Set the graphics mode
' 
' 
' 
' pub setmode(mode) | i', 'xzoom, yzoom, azoom
_setmode
	mov	COUNT_, #13
	call	#pushregs_
	mov	local01, arg01
	add	objptr, #80
	mov	arg01, objptr
	sub	objptr, #80
	add	ptr__dat__, ##7768
	mov	arg02, ptr__dat__
	sub	ptr__dat__, ##7768
' 
' longmove(@timings,@timings4096,16)
	mov	arg03, #16
	call	#__system__longmove
	add	ptr__dat__, ##6168
' palette_ptr:=@vga16
	add	objptr, #24
	wrlong	ptr__dat__, objptr
	add	objptr, #56
	mov	local02, objptr
	sub	ptr__dat__, ##6168
	sub	objptr, #80
	loc	pa,	#(@LR__0059-@LR__0057)
	call	#FCACHE_LOAD_
LR__0057
	rep	@LR__0060, #5
LR__0058
	add	objptr, #36
	rdlong	local03, objptr
	sub	objptr, #36
	shl	local03, #17
	rdlong	local04, local02
	add	local04, local03
	add	local04, ##1887502336
'   timings[i]:=timings[i]+hdmibase<<17+ timingsxxt
	wrlong	local04, local02
	add	local02, #4
LR__0059
LR__0060
	add	objptr, #36
	rdlong	local05, objptr
	shl	local05, #17
	add	objptr, #64
	rdlong	local06, objptr
	add	local06, local05
' timings[5]:=timings[5]+hdmibase<<17
	wrlong	local06, objptr
' clkfreq:=timings[13]
	add	objptr, #32
	rdlong	local07, objptr
	wrlong	local07, #20
' hubset(timings[14])
	add	objptr, #4
	rdlong	arg01, objptr
	sub	objptr, #136
	hubset	arg01
' waitms(1)
	mov	arg01, #1
	call	#__system___waitms
' 
' 
' xzoom:=2
	add	objptr, #204
	wrlong	#2, objptr
' 
' 
' yzoom:=2
	add	objptr, #4
	wrlong	#2, objptr
	sub	objptr, #4
	rdlong	local08, objptr
	add	objptr, #4
	rdlong	local09, objptr
	qmul	local08, local09
	getqx	local10
' azoom:=xzoom*yzoom
	add	objptr, #4
	wrlong	local10, objptr
' 
' cpl:=timings[11]
	sub	objptr, #88
	rdlong	local07, objptr
	add	objptr, #20
	wrlong	local07, objptr
' lines:=timings[12]
	sub	objptr, #16
	rdlong	local07, objptr
	add	objptr, #20
	wrlong	local07, objptr
	sub	objptr, #4
	rdlong	local08, objptr
	add	objptr, #4
	rdlong	local09, objptr
	qmul	local08, local09
	getqx	local11
' 
' buflen:=(cpl*lines)
	sub	objptr, #100
	wrlong	local11, objptr
	sub	objptr, #48
	shl	local11, #2
	decod	local12, #19
	sub	local12, local11
' 
' buf_ptr:=$80000-4*buflen
	wrlong	local12, objptr
	add	objptr, #80
	mov	local13, objptr
' mode_ptr:=@timings
	sub	objptr, #60
	wrlong	local13, objptr
' graphmode:=mode
	add	objptr, #176
	wrlong	local01, objptr
	sub	objptr, #196
' makedl(mode)
	mov	arg01, local01
	call	#_makedl
	mov	ptra, fp
	call	#popregs_
_setmode_ret
	ret

' 
' 
' 
' 
' '---------- Make a display list
' 
' pub makedl (mode) |i, fontline2,charline,bufstart,zoom1,vzoom,lpc,hzoom
_makedl
	mov	_var01, arg01
' 
' ''--%aaaa_aaaa_aaaa_aaaa_aazz_nnnn_llll_ll_01 - txt
'   '' aaaa_aaaa_aaaa_aaaa_aazz_rrrr_rrrr_cc_10 - graph
'   '' aaaa_aaaa_aaaa-aaaa_aarr_rrrr_rrrr_rr_11 - extended, next long to read
' 
' '   0 - display a up/down border line
' 
' '  ' aaaa_aaaa_aaaa_aaaa_aazz_nnnn_llll_ll_01 - text line
' '    aaaa_aaaa_aaaa_aaaa_aa00 - buffer start, has to be aligned, 1 long for char, ff_bb_rr_cc, foreground, background,reserved, charcode
' '    zz - zoom, 00-x1, 01-x2, 10-x4, 11-blank line
' '    nnnn - font line to display, 0..15
' '    llllll - character line, determines the cursor Y position
' 
'  
' if (mode &256==0)
	test	_var01, #256 wz
 if_ne	jmp	#LR__0061
	rdlong	_var02, objptr
	sub	_var02, ##2304
'   dl_ptr:=buf_ptr-4*576
	add	objptr, #28
	wrlong	_var02, objptr
	sub	objptr, #28
' else
	jmp	#LR__0062
LR__0061
	rdlong	_var03, objptr
	sub	_var03, ##1984
'   dl_ptr:=buf_ptr-4*496
	add	objptr, #28
	wrlong	_var03, objptr
	sub	objptr, #28
LR__0062
	mov	_var04, _var01
	shr	_var04, #2
	mov	_var05, _var04
	and	_var05, #3
' 
' vzoom:=((mode>>2) & 3)
	mov	_var06, _var05
' 
' 
' if mode<512 '' text modes
	cmps	_var01, ##512 wcz
 if_ae	jmp	#LR__0070
' 
'   if timings[6]>0 'borders
	add	objptr, #104
	rdlong	_var07, objptr
	sub	objptr, #104
	cmps	_var07, #0 wcz
 if_be	jmp	#LR__0067
'     repeat i from 0 to timings[6]-1 '0 to -1
	mov	_var08, #0
	add	objptr, #104
	rdlong	_var09, objptr
	sub	objptr, #104
	sub	_var09, #1
	cmps	_var09, #0 wcz
 if_a	mov	_var10, #1
 if_be	neg	_var10, #1
	mov	_var11, _var10
	add	_var09, _var10
	loc	pa,	#(@LR__0064-@LR__0063)
	call	#FCACHE_LOAD_
LR__0063
	mov	_var12, _var08
	shl	_var12, #2
	add	objptr, #28
	rdlong	_var13, objptr
	sub	objptr, #28
	add	_var13, _var12
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var13
	add	_var08, _var11
	cmp	_var08, _var09 wz
 if_ne	jmp	#LR__0063
LR__0064
'     repeat i from timings[6]+timings[12] to timings[15]-1
	add	objptr, #104
	rdlong	_var08, objptr
	add	objptr, #24
	rdlong	_var10, objptr
	add	_var08, _var10
	add	objptr, #12
	rdlong	_var14, objptr
	sub	_var14, #1
	sub	objptr, #36
	rdlong	_var15, objptr
	add	objptr, #24
	rdlong	_var16, objptr
	sub	objptr, #128
	add	_var15, _var16
	cmps	_var14, _var15 wcz
 if_a	mov	_var17, #1
 if_be	neg	_var17, #1
	mov	_var18, _var17
	add	_var14, _var17
	loc	pa,	#(@LR__0066-@LR__0065)
	call	#FCACHE_LOAD_
LR__0065
	mov	_var19, _var08
	shl	_var19, #2
	add	objptr, #28
	rdlong	_var20, objptr
	sub	objptr, #28
	mov	_var21, _var20
	add	_var21, _var19
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var21
	mov	_var22, _var08
	add	_var22, _var18
	mov	_var08, _var22
	cmp	_var08, _var14 wz
 if_ne	jmp	#LR__0065
LR__0066
LR__0067
	mov	_var23, #16
	shl	_var23, _var06
'   lpc:=16<<vzoom
	mov	_var24, _var23
'   repeat i from timings[6] to timings[6]+timings[12]-1
	add	objptr, #104
	rdlong	_var08, objptr
	mov	_var25, _var08
	add	objptr, #24
	rdlong	_var26, objptr
	add	_var25, _var26
	sub	_var25, #1
	sub	objptr, #24
	rdlong	_var17, objptr
	sub	objptr, #104
	cmps	_var25, _var17 wcz
 if_a	mov	_var27, #1
 if_be	neg	_var27, #1
	mov	_var28, _var27
	add	_var25, _var27
	loc	pa,	#(@LR__0069-@LR__0068)
	call	#FCACHE_LOAD_
LR__0068
	mov	_var29, _var08
	add	objptr, #104
	rdlong	_var30, objptr
	sub	objptr, #104
	sub	_var29, _var30
	mov	muldiva_, _var29
	mov	muldivb_, _var24
	call	#unsdivide_
	mov	_var31, muldiva_
	mov	_var32, _var31
	shr	_var32, _var06
'     fontline2:=((i-timings[6])+//lpc)>>vzoom
	mov	_var33, _var32
	mov	_var34, _var08
	add	objptr, #104
	rdlong	_var30, objptr
	sub	objptr, #104
	sub	_var34, _var30
	mov	muldiva_, _var34
	mov	muldivb_, _var24
	call	#unsdivide_
	mov	_var35, muldivb_
'     charline:=(i-timings[6])+/lpc
	mov	_var36, _var35
	add	objptr, #144
	rdlong	_var30, objptr
	sub	objptr, #144
	qmul	_var30, _var36
	getqx	_var37
	mov	_var38, _var37
	shl	_var38, #2
	rdlong	_var39, objptr
	add	_var39, _var38
	mov	_var40, _var01
	and	_var40, #3
	mov	_var41, _var39
	add	_var41, _var40
'     bufstart:=buf_ptr+4*((cpl)*charline)+(mode&3)
	mov	_var42, _var41
	shl	_var42, #12
	mov	_var43, _var33
	shl	_var43, #8
	mov	_var44, _var42
	add	_var44, _var43
	mov	_var45, _var36
	shl	_var45, #2
	mov	_var46, _var44
	add	_var46, _var45
	mov	_var47, _var46
	add	_var47, #1
	mov	_var48, _var08
	shl	_var48, #2
	add	objptr, #28
	rdlong	_var49, objptr
	sub	objptr, #28
	add	_var49, _var48
'     long[dl_ptr+4*i]:=(bufstart<<12)+(fontline2<<8)+(charline<<2)+1
	wrlong	_var47, _var49
	add	_var08, _var28
	cmp	_var08, _var25 wz
 if_ne	jmp	#LR__0068
LR__0069
LR__0070
' 
' 
' 
' if (mode>=512) and (mode<4096)' and (mode & (%10_00_00_0000))==(%10_00_00_0000) ' graphics -> all modes TODO :mode 560+192=752 = 10_11_11_0000 impossib,e because out of memory
	cmps	_var01, ##512 wcz
 if_b	jmp	#LR__0078
	cmps	_var01, ##4096 wcz
 if_ae	jmp	#LR__0078
' 
'   if timings[6]>0 'borders
	add	objptr, #104
	rdlong	_var07, objptr
	sub	objptr, #104
	cmps	_var07, #0 wcz
 if_be	jmp	#LR__0075
'     repeat i from 0 to timings[6]-1 '0 to -1
	mov	_var08, #0
	add	objptr, #104
	rdlong	_var50, objptr
	sub	objptr, #104
	sub	_var50, #1
	cmps	_var50, #0 wcz
 if_a	mov	_var10, #1
 if_be	neg	_var10, #1
	mov	_var51, _var10
	add	_var50, _var10
	loc	pa,	#(@LR__0072-@LR__0071)
	call	#FCACHE_LOAD_
LR__0071
	mov	_var52, _var08
	shl	_var52, #2
	add	objptr, #28
	rdlong	_var53, objptr
	sub	objptr, #28
	add	_var53, _var52
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var53
	add	_var08, _var51
	cmp	_var08, _var50 wz
 if_ne	jmp	#LR__0071
LR__0072
'     repeat i from timings[6]+timings[12] to timings[15]-1
	add	objptr, #104
	rdlong	_var08, objptr
	add	objptr, #24
	rdlong	_var10, objptr
	add	_var08, _var10
	add	objptr, #12
	rdlong	_var54, objptr
	sub	_var54, #1
	sub	objptr, #36
	rdlong	_var15, objptr
	add	objptr, #24
	rdlong	_var16, objptr
	sub	objptr, #128
	add	_var15, _var16
	cmps	_var54, _var15 wcz
 if_a	mov	_var17, #1
 if_be	neg	_var17, #1
	mov	_var55, _var17
	add	_var54, _var17
	loc	pa,	#(@LR__0074-@LR__0073)
	call	#FCACHE_LOAD_
LR__0073
	mov	_var56, _var08
	shl	_var56, #2
	add	objptr, #28
	rdlong	_var20, objptr
	sub	objptr, #28
	mov	_var57, _var20
	add	_var57, _var56
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var57
	mov	_var22, _var08
	add	_var22, _var55
	mov	_var08, _var22
	cmp	_var08, _var54 wz
 if_ne	jmp	#LR__0073
LR__0074
LR__0075
'   repeat i from timings[6] to timings[6]+timings[12]-1
	add	objptr, #104
	rdlong	_var07, objptr
	mov	_var08, _var07
	mov	_var10, _var07
	mov	_var58, _var10
	add	objptr, #24
	rdlong	_var59, objptr
	mov	_var26, _var59
	add	_var58, _var59
	sub	_var58, #1
	sub	objptr, #24
	rdlong	_var15, objptr
	sub	objptr, #104
	mov	_var17, _var15
	cmps	_var58, _var17 wcz
 if_a	mov	_var27, #1
 if_be	neg	_var27, #1
	mov	_var60, _var27
	mov	_var61, _var58
	add	_var61, _var60
	mov	_var62, _var61
	loc	pa,	#(@LR__0077-@LR__0076)
	call	#FCACHE_LOAD_
LR__0076
	mov	_var63, _var08
	add	objptr, #104
	rdlong	_var30, objptr
	sub	_var63, _var30
	mov	_var64, _var63
	shr	_var64, _var06
	add	objptr, #40
	rdlong	_var65, objptr
	sub	objptr, #144
	qmul	_var65, _var64
	getqx	_var66
	mov	_var67, _var66
	shl	_var67, #2
	rdlong	_var68, objptr
	add	_var68, _var67
	mov	_var69, _var01
	and	_var69, #3
	mov	_var70, _var68
	add	_var70, _var69
'     bufstart:=buf_ptr+4*(cpl*((i-timings[6])>>vzoom))+(mode&3)
	mov	_var71, _var70
	mov	_var72, _var71
	shl	_var72, #12
	mov	_var73, _var72
	add	_var73, #2
	mov	_var74, _var01
	and	_var74, #48
	mov	_var75, _var74
	shr	_var75, #2
	mov	_var76, _var73
	add	_var76, _var75
	mov	_var77, _var08
	shl	_var77, #2
	add	objptr, #28
	rdlong	_var30, objptr
	sub	objptr, #28
	mov	_var78, _var30
	add	_var78, _var77
'     long[dl_ptr+4*i]:=(bufstart<<12)+2+(mode &48)>>2
	wrlong	_var76, _var78
	mov	_var16, _var08
	add	_var16, _var60
	mov	_var08, _var16
	cmp	_var08, _var62 wz
 if_ne	jmp	#LR__0076
LR__0077
LR__0078
' 
' 
' if (mode==4096) ' graphics -> all modes TODO :mode 560+192=752 = 10_11_11_0000 impossib,e because out of memory
	cmp	_var01, ##4096 wz
 if_ne	jmp	#LR__0086
' 
' 
' 
'   if timings[6]>0 'borders
	add	objptr, #104
	rdlong	_var07, objptr
	sub	objptr, #104
	cmps	_var07, #0 wcz
 if_be	jmp	#LR__0083
'     repeat i from 0 to timings[6]-1 '0 to -1
	mov	_var08, #0
	add	objptr, #104
	rdlong	_var79, objptr
	sub	objptr, #104
	sub	_var79, #1
	cmps	_var79, #0 wcz
 if_a	mov	_var10, #1
 if_be	neg	_var10, #1
	mov	_var80, _var10
	add	_var79, _var10
	loc	pa,	#(@LR__0080-@LR__0079)
	call	#FCACHE_LOAD_
LR__0079
	mov	_var81, _var08
	shl	_var81, #2
	add	objptr, #28
	rdlong	_var82, objptr
	sub	objptr, #28
	add	_var82, _var81
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var82
	add	_var08, _var80
	cmp	_var08, _var79 wz
 if_ne	jmp	#LR__0079
LR__0080
'     repeat i from timings[6]+timings[12] to timings[15]-1
	add	objptr, #104
	rdlong	_var08, objptr
	add	objptr, #24
	rdlong	_var10, objptr
	add	_var08, _var10
	add	objptr, #12
	rdlong	_var83, objptr
	sub	_var83, #1
	sub	objptr, #36
	rdlong	_var15, objptr
	add	objptr, #24
	rdlong	_var16, objptr
	sub	objptr, #128
	add	_var15, _var16
	cmps	_var83, _var15 wcz
 if_a	mov	_var17, #1
 if_be	neg	_var17, #1
	mov	_var84, _var17
	add	_var83, _var17
	loc	pa,	#(@LR__0082-@LR__0081)
	call	#FCACHE_LOAD_
LR__0081
	mov	_var85, _var08
	shl	_var85, #2
	add	objptr, #28
	rdlong	_var86, objptr
	sub	objptr, #28
	add	_var86, _var85
'       long[dl_ptr+4*i]:=$0
	wrlong	#0, _var86
	add	_var08, _var84
	cmp	_var08, _var83 wz
 if_ne	jmp	#LR__0081
LR__0082
LR__0083
'   repeat i from timings[6] to timings[6]+timings[12]-1
	add	objptr, #104
	rdlong	_var08, objptr
	mov	_var87, _var08
	add	objptr, #24
	rdlong	_var26, objptr
	add	_var87, _var26
	sub	_var87, #1
	sub	objptr, #24
	rdlong	_var17, objptr
	sub	objptr, #104
	cmps	_var87, _var17 wcz
 if_a	mov	_var27, #1
 if_be	neg	_var27, #1
	mov	_var88, _var27
	add	_var87, _var27
	loc	pa,	#(@LR__0085-@LR__0084)
	call	#FCACHE_LOAD_
LR__0084
	mov	_var89, _var08
	add	objptr, #104
	rdlong	_var30, objptr
	sub	_var89, _var30
	shr	_var89, _var06
	add	objptr, #40
	rdlong	_var30, objptr
	sub	objptr, #144
	qmul	_var30, _var89
	getqx	_var90
	shl	_var90, #2
	rdlong	_var91, objptr
	add	_var91, _var90
	mov	_var92, _var01
	and	_var92, #3
	add	_var91, _var92
'     bufstart:=buf_ptr+4*(cpl*((i-timings[6])>>vzoom))+(mode&3)
	shl	_var91, #12
	add	_var91, #10
	mov	_var93, _var08
	shl	_var93, #2
	add	objptr, #28
	rdlong	_var94, objptr
	sub	objptr, #28
	add	_var94, _var93
'     long[dl_ptr+4*i]:=(bufstart<<12)+2+(32)>>2
	wrlong	_var91, _var94
	add	_var08, _var88
	cmp	_var08, _var87 wz
 if_ne	jmp	#LR__0084
LR__0085
LR__0086
_makedl_ret
	ret
hubexit
	jmp	#cogexit

__system____builtin_memset
	mov	_var01, arg01
	mov	_var02, arg02
	shl	_var02, #8
	or	_var02, arg02
	mov	_var03, _var02
	shl	_var03, #16
	or	_var03, _var02
	loc	pa,	#(@LR__0088-@LR__0087)
	call	#FCACHE_LOAD_
LR__0087
	cmps	arg03, #3 wcz
 if_be	jmp	#LR__0089
	wrlong	_var03, arg01
	add	arg01, #4
	sub	arg03, #4
	jmp	#LR__0087
LR__0088
LR__0089
	cmp	arg03, #0 wz
 if_e	jmp	#LR__0094
	loc	pa,	#(@LR__0092-@LR__0090)
	call	#FCACHE_LOAD_
LR__0090
	rep	@LR__0093, arg03
LR__0091
	wrbyte	arg02, arg01
	add	arg01, #1
LR__0092
LR__0093
LR__0094
	mov	result1, _var01
__system____builtin_memset_ret
	ret

__system____builtin_memmove
	mov	_var01, arg01
	cmps	arg01, arg02 wcz
 if_ae	jmp	#LR__0102
	loc	pa,	#(@LR__0096-@LR__0095)
	call	#FCACHE_LOAD_
LR__0095
	cmps	arg03, #3 wcz
 if_be	jmp	#LR__0097
	rdlong	_var02, arg02
	wrlong	_var02, arg01
	add	arg01, #4
	add	arg02, #4
	sub	arg03, #4
	jmp	#LR__0095
LR__0096
LR__0097
	mov	_var03, arg03 wz
 if_e	jmp	#LR__0108
	loc	pa,	#(@LR__0100-@LR__0098)
	call	#FCACHE_LOAD_
LR__0098
	rep	@LR__0101, _var03
LR__0099
	rdbyte	_var02, arg02
	wrbyte	_var02, arg01
	add	arg01, #1
	add	arg02, #1
LR__0100
LR__0101
	jmp	#LR__0108
LR__0102
	add	arg01, arg03
	add	arg02, arg03
	mov	_var04, arg03 wz
 if_e	jmp	#LR__0107
	loc	pa,	#(@LR__0105-@LR__0103)
	call	#FCACHE_LOAD_
LR__0103
	rep	@LR__0106, _var04
LR__0104
	sub	arg01, #1
	sub	arg02, #1
	rdbyte	_var02, arg02
	wrbyte	_var02, arg01
LR__0105
LR__0106
LR__0107
LR__0108
	mov	result1, _var01
__system____builtin_memmove_ret
	ret

__system__longmove
	mov	_var01, arg01
	cmps	arg01, arg02 wcz
 if_ae	jmp	#LR__0113
	mov	_var02, arg03 wz
 if_e	jmp	#LR__0119
	loc	pa,	#(@LR__0111-@LR__0109)
	call	#FCACHE_LOAD_
LR__0109
	rep	@LR__0112, _var02
LR__0110
	rdlong	_var03, arg02
	wrlong	_var03, arg01
	add	arg01, #4
	add	arg02, #4
LR__0111
LR__0112
	jmp	#LR__0119
LR__0113
	mov	_var04, arg03
	shl	_var04, #2
	add	arg01, _var04
	add	arg02, _var04
	mov	_var05, arg03 wz
 if_e	jmp	#LR__0118
	loc	pa,	#(@LR__0116-@LR__0114)
	call	#FCACHE_LOAD_
LR__0114
	rep	@LR__0117, _var05
LR__0115
	sub	arg01, #4
	sub	arg02, #4
	rdlong	_var03, arg02
	wrlong	_var03, arg01
LR__0116
LR__0117
LR__0118
LR__0119
	mov	result1, _var01
__system__longmove_ret
	ret

__system___waitms
	mov	COUNT_, #2
	call	#pushregs_
	mov	local01, arg01
	rdlong	local02, #20
	loc	pa,	#(@LR__0121-@LR__0120)
	call	#FCACHE_LOAD_
LR__0120
	cmps	local01, ##1000 wcz
 if_a	waitx	local02
 if_a	sub	local01, ##1000
 if_a	jmp	#LR__0120
LR__0121
	cmps	local01, #0 wcz
 if_be	jmp	#LR__0122
	mov	muldiva_, local02
	mov	muldivb_, ##1000
	call	#divide_
	qmul	local01, muldivb_
	getqx	arg01
	waitx	arg01
LR__0122
	mov	ptra, fp
	call	#popregs_
__system___waitms_ret
	ret

__system___waitus
	mov	COUNT_, #2
	call	#pushregs_
	mov	local01, arg01
	rdlong	local02, #20
	loc	pa,	#(@LR__0124-@LR__0123)
	call	#FCACHE_LOAD_
LR__0123
	cmps	local01, ##1000000 wcz
 if_a	waitx	local02
 if_a	sub	local01, ##1000000
 if_a	jmp	#LR__0123
LR__0124
	cmps	local01, #0 wcz
 if_be	jmp	#LR__0125
	mov	muldiva_, local02
	mov	muldivb_, ##1000000
	call	#divide_
	qmul	local01, muldivb_
	getqx	arg01
	waitx	arg01
LR__0125
	mov	ptra, fp
	call	#popregs_
__system___waitus_ret
	ret

LR__0126
	byte	"mode"
	byte	0
LR__0127
	byte	"cpl"
	byte	0
LR__0128
	byte	"bufptr"
	byte	0
LR__0129
	byte	"buflen"
	byte	0
LR__0130
	byte	"lines"
	byte	0
LR__0131
	byte	"mode"
	byte	0
LR__0132
	byte	"cpl"
	byte	0
LR__0133
	byte	"buf_ptr"
	byte	0
LR__0134
	byte	"buflen"
	byte	0
LR__0135
	byte	"lines"
	byte	0
LR__0136
	byte	"mode"
	byte	0
LR__0137
	byte	"cpl"
	byte	0
LR__0138
	byte	"buf_ptr"
	byte	0
LR__0139
	byte	"buflen"
	byte	0
LR__0140
	byte	"lines"
	byte	0
LR__0141
	byte	"mode"
	byte	0
LR__0142
	byte	"cpl"
	byte	0
LR__0143
	byte	"buf_ptr"
	byte	0
LR__0144
	byte	"buflen"
	byte	0
LR__0145
	byte	"lines"
	byte	0
	alignl
_dat_
'-' vga_font       file "vgafont.def"
	byte	$00[19]
	byte	$7e, $81, $a5, $81, $81, $bd, $99, $81, $81, $7e, $00, $00, $00, $00, $00, $00
	byte	$7e, $ff, $db, $ff, $ff, $c3, $e7, $ff, $ff, $7e, $00, $00, $00, $00, $00, $00
	byte	$00, $36, $7f, $7f, $7f, $7f, $3e, $1c, $08, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $08, $1c, $3e, $7f, $3e, $1c, $08, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$18, $3c, $3c, $e7, $e7, $e7, $18, $18, $3c, $00, $00, $00, $00, $00, $00, $00
	byte	$18, $3c, $7e, $ff, $ff, $7e, $18, $18, $3c, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $18, $3c, $3c, $18, $00, $00, $00, $00, $00, $00, $ff, $ff, $ff
	byte	$ff, $ff, $ff, $e7, $c3, $c3, $e7, $ff, $ff, $ff, $ff, $ff, $ff, $00, $00, $00
	byte	$00, $00, $3c, $66, $42, $42, $66, $3c, $00, $00, $00, $00, $00, $ff, $ff, $ff
	byte	$ff, $ff, $c3, $99, $bd, $bd, $99, $c3, $ff, $ff, $ff, $ff, $ff, $00, $00, $00
	byte	$78, $70, $58, $4c, $1e, $33, $33, $33, $33, $1e, $00, $00, $00, $00, $00, $00
	byte	$3c, $66, $66, $66, $66, $3c, $18, $7e, $18, $18, $00, $00, $00, $00, $00, $00
	byte	$fc, $cc, $fc, $0c, $0c, $0c, $0c, $0e, $0f, $07, $00, $00, $00, $00, $00, $00
	byte	$fe, $c6, $fe, $c6, $c6, $c6, $c6, $e6, $e7, $67, $03, $00, $00, $00, $00, $00
	byte	$18, $18, $db, $3c, $e7, $3c, $db, $18, $18, $00, $00, $00, $00, $00, $00, $01
	byte	$03, $07, $0f, $1f, $7f, $1f, $0f, $07, $03, $01, $00, $00, $00, $00, $00, $40
	byte	$60, $70, $78, $7c, $7f, $7c, $78, $70, $60, $40, $00, $00, $00, $00, $00, $00
	byte	$18, $3c, $7e, $18, $18, $18, $7e, $3c, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$66[7]
	byte	$00, $66, $66, $00, $00, $00, $00, $00, $00, $fe, $db, $db, $db, $de, $d8, $d8
	byte	$d8, $d8, $d8, $00, $00, $00, $00, $3e, $63, $06, $1c, $36, $63, $63, $36, $1c
	byte	$30, $63, $3e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7f
	byte	$7f, $7f, $7f, $00, $00, $00, $00, $00, $00, $18, $3c, $7e, $18, $18, $18, $7e
	byte	$3c, $18, $7e, $00, $00, $00, $00, $00, $00, $18, $3c, $7e, $18, $18, $18, $18
	byte	$18, $18, $18, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18
	byte	$7e, $3c, $18, $00, $00, $00, $00, $00, $00, $00, $00, $18, $30, $7f, $30, $18
	byte	$00[11]
	byte	$0c, $06, $7f, $06, $0c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $03, $03, $03, $7f, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$14, $36, $7f, $36, $14, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $08
	byte	$1c, $1c, $3e, $3e, $7f, $7f, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7f
	byte	$7f, $3e, $3e, $1c, $1c, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[14]
	byte	$18, $3c, $3c, $3c, $18, $18, $18, $00, $18, $18, $00, $00, $00, $00, $66, $66
	byte	$66, $24, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $36, $36, $7f, $36, $36, $36, $7f, $36, $36, $00, $00, $00, $00, $18, $18
	byte	$3e, $63, $43, $03, $3e, $60, $60, $61, $63, $3e, $18, $18, $00, $00, $00, $00
	byte	$00, $00, $43, $63, $30, $18, $0c, $06, $63, $61, $00, $00, $00, $00, $00, $00
	byte	$1c, $36, $36, $1c, $6e, $3b, $33, $33, $33, $6e, $00, $00, $00, $00, $00, $00
	byte	$0c, $0c, $0c, $06, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$30, $18, $0c, $0c, $0c, $0c, $0c, $0c, $18, $30, $00, $00, $00, $00, $00, $00
	byte	$0c, $18, $30, $30, $30, $30, $30, $30, $18, $0c, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $66, $3c, $ff, $3c, $66, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $18, $18, $7e, $18, $18, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[8]
	byte	$18, $18, $18, $0c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7f, $00, $00
	byte	$00[16]
	byte	$18, $18, $00, $00, $00, $00, $00, $00, $00, $00, $40, $60, $30, $18, $0c, $06
	byte	$03, $01, $00, $00, $00, $00, $00, $00, $1c, $36, $63, $63, $6b, $6b, $63, $63
	byte	$36, $1c, $00, $00, $00, $00, $00, $00, $18, $1c, $1e, $18, $18, $18, $18, $18
	byte	$18, $7e, $00, $00, $00, $00, $00, $00, $3e, $63, $60, $30, $18, $0c, $06, $03
	byte	$63, $7f, $00, $00, $00, $00, $00, $00, $3e, $63, $60, $60, $3c, $60, $60, $60
	byte	$63, $3e, $00, $00, $00, $00, $00, $00, $30, $38, $3c, $36, $33, $7f, $30, $30
	byte	$30, $78, $00, $00, $00, $00, $00, $00, $7f, $03, $03, $03, $3f, $60, $60, $60
	byte	$63, $3e, $00, $00, $00, $00, $00, $00, $1c, $06, $03, $03, $3f, $63, $63, $63
	byte	$63, $3e, $00, $00, $00, $00, $00, $00, $7f, $63, $60, $60, $30, $18, $0c, $0c
	byte	$0c, $0c, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $63, $3e, $63, $63, $63
	byte	$63, $3e, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $63, $7e, $60, $60, $60
	byte	$30, $1e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $18, $18, $00, $00, $00
	byte	$18, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $18, $18, $00, $00, $00
	byte	$18, $18, $0c, $00, $00, $00, $00, $00, $00, $60, $30, $18, $0c, $06, $0c, $18
	byte	$30, $60, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7e, $00, $00, $7e, $00
	byte	$00[9]
	byte	$06, $0c, $18, $30, $60, $30, $18, $0c, $06, $00, $00, $00, $00, $00, $00, $3e
	byte	$63, $63, $30, $18, $18, $18, $00, $18, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$3e, $63, $63, $7b, $7b, $7b, $3b, $03, $3e, $00, $00, $00, $00, $00, $00, $08
	byte	$1c, $36, $63, $63, $7f, $63, $63, $63, $63, $00, $00, $00, $00, $00, $00, $3f
	byte	$66, $66, $66, $3e, $66, $66, $66, $66, $3f, $00, $00, $00, $00, $00, $00, $3c
	byte	$66, $43, $03, $03, $03, $03, $43, $66, $3c, $00, $00, $00, $00, $00, $00, $1f
	byte	$36, $66, $66, $66, $66, $66, $66, $36, $1f, $00, $00, $00, $00, $00, $00, $7f
	byte	$66, $46, $16, $1e, $16, $06, $46, $66, $7f, $00, $00, $00, $00, $00, $00, $7f
	byte	$66, $46, $16, $1e, $16, $06, $06, $06, $0f, $00, $00, $00, $00, $00, $00, $3c
	byte	$66, $43, $03, $03, $7b, $63, $63, $66, $5c, $00, $00, $00, $00, $00, $00, $63
	byte	$63, $63, $63, $7f, $63, $63, $63, $63, $63, $00, $00, $00, $00, $00, $00, $3c
	byte	$18[8]
	byte	$3c, $00, $00, $00, $00, $00, $00, $78, $30, $30, $30, $30, $30, $33, $33, $33
	byte	$1e, $00, $00, $00, $00, $00, $00, $67, $66, $66, $36, $1e, $1e, $36, $66, $66
	byte	$67, $00, $00, $00, $00, $00, $00, $0f, $06, $06, $06, $06, $06, $06, $46, $66
	byte	$7f, $00, $00, $00, $00, $00, $00, $63, $77, $7f, $7f, $6b, $63, $63, $63, $63
	byte	$63, $00, $00, $00, $00, $00, $00, $63, $67, $6f, $7f, $7b, $73, $63, $63, $63
	byte	$63, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $63, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $3f, $66, $66, $66, $3e, $06, $06, $06, $06
	byte	$0f, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $63, $63, $63, $63, $6b, $7b
	byte	$3e, $30, $70, $00, $00, $00, $00, $3f, $66, $66, $66, $3e, $36, $66, $66, $66
	byte	$67, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $06, $1c, $30, $60, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $7e, $7e, $5a, $18, $18, $18, $18, $18, $18
	byte	$3c, $00, $00, $00, $00, $00, $00, $63, $63, $63, $63, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $63, $63, $63, $63, $63, $63, $63, $36, $1c
	byte	$08, $00, $00, $00, $00, $00, $00, $63, $63, $63, $63, $6b, $6b, $6b, $7f, $77
	byte	$36, $00, $00, $00, $00, $00, $00, $63, $63, $36, $3e, $1c, $1c, $3e, $36, $63
	byte	$63, $00, $00, $00, $00, $00, $00, $66, $66, $66, $66, $3c, $18, $18, $18, $18
	byte	$3c, $00, $00, $00, $00, $00, $00, $7f, $63, $61, $30, $18, $0c, $06, $43, $63
	byte	$7f, $00, $00, $00, $00, $00, $00, $3c, $0c, $0c, $0c, $0c, $0c, $0c, $0c, $0c
	byte	$3c, $00, $00, $00, $00, $00, $00, $00, $01, $03, $07, $0e, $1c, $38, $70, $60
	byte	$40, $00, $00, $00, $00, $00, $00, $3c, $30, $30, $30, $30, $30, $30, $30, $30
	byte	$3c, $00, $00, $00, $1c, $36, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[17]
	byte	$ff, $00, $00, $0c, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[9]
	byte	$1e, $30, $3e, $33, $33, $33, $6e, $00, $00, $00, $00, $00, $00, $07, $06, $06
	byte	$1e, $36, $66, $66, $66, $66, $3e, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$3e, $63, $03, $03, $03, $63, $3e, $00, $00, $00, $00, $00, $00, $38, $30, $30
	byte	$3c, $36, $33, $33, $33, $33, $6e, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$3e, $63, $7f, $03, $03, $63, $3e, $00, $00, $00, $00, $00, $00, $38, $6c, $4c
	byte	$0c, $1e, $0c, $0c, $0c, $0c, $1e, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$6e, $33, $33, $33, $33, $33, $3e, $30, $33, $1e, $00, $00, $00, $07, $06, $06
	byte	$36, $6e, $66, $66, $66, $66, $67, $00, $00, $00, $00, $00, $00, $18, $18, $00
	byte	$1c, $18, $18, $18, $18, $18, $3c, $00, $00, $00, $00, $00, $00, $60, $60, $00
	byte	$70, $60, $60, $60, $60, $60, $60, $66, $66, $3c, $00, $00, $00, $07, $06, $06
	byte	$66, $36, $1e, $1e, $36, $66, $67, $00, $00, $00, $00, $00, $00, $1c, $18, $18
	byte	$18[6]
	byte	$3c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $37, $7f, $6b, $6b, $6b, $6b
	byte	$63, $00, $00, $00, $00, $00, $00, $00, $00, $00, $3b, $66, $66, $66, $66, $66
	byte	$66, $00, $00, $00, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $3b, $66, $66, $66, $66, $66
	byte	$3e, $06, $06, $0f, $00, $00, $00, $00, $00, $00, $6e, $33, $33, $33, $33, $33
	byte	$3e, $30, $30, $78, $00, $00, $00, $00, $00, $00, $3b, $6e, $66, $06, $06, $06
	byte	$0f, $00, $00, $00, $00, $00, $00, $00, $00, $00, $3e, $63, $06, $1c, $30, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $08, $0c, $0c, $3f, $0c, $0c, $0c, $0c, $6c
	byte	$38, $00, $00, $00, $00, $00, $00, $00, $00, $00, $33, $33, $33, $33, $33, $33
	byte	$6e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $63, $63, $63, $63, $63, $36
	byte	$1c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $63, $63, $6b, $6b, $6b, $7f
	byte	$36, $00, $00, $00, $00, $00, $00, $00, $00, $00, $63, $36, $1c, $1c, $1c, $36
	byte	$63, $00, $00, $00, $00, $00, $00, $00, $00, $00, $63, $63, $63, $63, $63, $63
	byte	$7e, $60, $30, $1f, $00, $00, $00, $00, $00, $00, $7f, $33, $18, $0c, $06, $63
	byte	$7f, $00, $00, $00, $00, $00, $00, $70, $18, $18, $18, $0e, $18, $18, $18, $18
	byte	$70, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $00, $00, $00, $00, $00, $00, $0e, $18, $18, $18, $70, $18, $18, $18, $18
	byte	$0e, $00, $00, $00, $6e, $3b, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[10]
	byte	$08, $1c, $36, $63, $63, $63, $7f, $00, $00, $00, $00, $00, $00, $3c, $66, $43
	byte	$03, $03, $03, $03, $43, $66, $3c, $18, $30, $1e, $00, $00, $00, $00, $33, $00
	byte	$33[6]
	byte	$6e, $00, $00, $00, $00, $00, $60, $30, $18, $00, $3e, $63, $7f, $03, $03, $63
	byte	$3e, $00, $00, $00, $00, $00, $08, $1c, $36, $00, $1e, $30, $3e, $33, $33, $33
	byte	$6e, $00, $00, $00, $00, $00, $00, $00, $33, $00, $1e, $30, $3e, $33, $33, $33
	byte	$6e, $00, $00, $00, $00, $00, $1c, $36, $1c, $00, $33, $33, $33, $33, $33, $33
	byte	$6e, $00, $00, $00, $00, $00, $60, $30, $18, $00, $3e, $63, $03, $03, $03, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $3e, $63, $03, $03, $03, $63
	byte	$3e, $18, $30, $1e, $00, $00, $00, $1c, $58, $78, $38, $18, $1c, $1e, $1a, $18
	byte	$3c, $00, $00, $00, $00, $00, $00, $00, $63, $00, $3e, $63, $7f, $03, $03, $63
	byte	$3e, $00, $00, $00, $66, $33, $00, $3e, $63, $63, $63, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $cc, $66, $33, $00, $3e, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $18, $3c, $66, $00, $1c, $18, $18, $18, $18, $18
	byte	$3c, $00, $00, $00, $30, $18, $00, $7f, $63, $61, $30, $18, $0c, $06, $43, $63
	byte	$7f, $00, $00, $00, $00, $63, $00, $08, $1c, $36, $63, $63, $7f, $63, $63, $63
	byte	$63, $00, $00, $00, $30, $18, $00, $3c, $66, $43, $03, $03, $03, $03, $43, $66
	byte	$3c, $00, $00, $00, $30, $18, $00, $7f, $66, $46, $16, $1e, $16, $06, $46, $66
	byte	$7f, $00, $00, $00, $0c, $06, $00, $0f, $06, $06, $06, $06, $06, $06, $46, $66
	byte	$7f, $00, $00, $00, $30, $18, $00, $1c, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$3c, $00, $00, $00, $00, $00, $08, $1c, $36, $00, $3e, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $00, $63, $00, $3e, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $00, $6f, $46, $26, $06, $06, $06, $06, $46, $66
	byte	$7f, $00, $00, $00, $00, $00, $00, $6e, $4c, $2c, $0c, $0c, $0c, $0c, $0c, $0c
	byte	$1e, $00, $00, $00, $30, $18, $00, $3e, $63, $63, $06, $1c, $30, $60, $63, $63
	byte	$3e, $00, $00, $00, $00, $00, $60, $30, $18, $00, $3e, $63, $06, $1c, $30, $63
	byte	$3e, $00, $00, $00, $00, $63, $00, $3e, $63, $63, $63, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $00, $63, $00, $63, $63, $63, $63, $63, $63, $63, $63, $63
	byte	$3e, $00, $00, $00, $6c, $38, $00, $7e, $7e, $5a, $18, $18, $18, $18, $18, $18
	byte	$3c, $00, $00, $00, $00, $00, $60, $48, $2c, $0c, $3f, $0c, $0c, $0c, $0c, $6c
	byte	$38, $00, $00, $00, $00, $00, $00, $0f, $26, $36, $1e, $0e, $07, $07, $46, $66
	byte	$7f, $00, $00, $00, $00, $00, $00, $00, $00, $63, $36, $1c, $1c, $36, $63, $00
	byte	$00[6]
	byte	$36, $1c, $08, $00, $3e, $63, $03, $03, $03, $63, $3e, $00, $00, $00, $00, $00
	byte	$30, $18, $0c, $00, $1e, $30, $3e, $33, $33, $33, $6e, $00, $00, $00, $00, $00
	byte	$60, $30, $18, $00, $1c, $18, $18, $18, $18, $18, $3c, $00, $00, $00, $00, $00
	byte	$60, $30, $18, $00, $3e, $63, $63, $63, $63, $63, $3e, $00, $00, $00, $00, $00
	byte	$30, $18, $0c, $00, $33, $33, $33, $33, $33, $33, $6e, $00, $00, $00, $00, $00
	byte	$00, $08, $1c, $36, $63, $63, $7f, $63, $63, $63, $63, $18, $0c, $78, $00, $00
	byte	$00, $00, $00, $00, $1e, $30, $3e, $33, $33, $33, $6e, $18, $0c, $78, $36, $1c
	byte	$00, $7f, $63, $61, $30, $18, $0c, $06, $43, $63, $7f, $00, $00, $00, $00, $00
	byte	$36, $1c, $08, $00, $7f, $33, $18, $0c, $06, $63, $7f, $00, $00, $00, $00, $00
	byte	$00, $7f, $66, $46, $16, $1e, $16, $06, $46, $66, $7f, $18, $0c, $78, $00, $00
	byte	$00, $00, $00, $00, $3e, $63, $7f, $03, $03, $63, $3e, $18, $0c, $78, $00, $00
	byte	$00, $3c, $66, $03, $1f, $03, $0f, $03, $03, $66, $3c, $00, $00, $00, $00, $00
	byte	$60, $30, $18, $00, $7f, $33, $18, $0c, $06, $63, $7f, $00, $00, $00, $6c, $38
	byte	$00, $3c, $66, $43, $03, $03, $03, $03, $43, $66, $3c, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $00, $3e, $63, $06, $1c, $30, $63, $3e, $18, $30, $1e, $00, $00
	byte	$00[6]
	byte	$6c, $36, $1b, $36, $6c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$1b, $36, $6c, $36, $1b, $00, $00, $00, $88, $22, $88, $22, $88, $22, $88, $22
	byte	$88, $22, $88, $22, $88, $22, $88, $22, $aa, $55, $aa, $55, $aa, $55, $aa, $55
	byte	$aa, $55, $aa, $55, $aa, $55, $aa, $55, $bb, $ee, $bb, $ee, $bb, $ee, $bb, $ee
	byte	$bb, $ee, $bb, $ee, $bb, $ee, $bb, $ee, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$18[15]
	byte	$1f, $18, $18, $18, $18, $18, $18, $18, $18, $30, $18, $00, $08, $1c, $36, $63
	byte	$63, $7f, $63, $63, $63, $63, $00, $00, $00, $1c, $36, $00, $08, $1c, $36, $63
	byte	$63, $7f, $63, $63, $63, $63, $00, $00, $00, $36, $1c, $00, $7f, $66, $46, $16
	byte	$1e, $16, $06, $46, $66, $7f, $00, $00, $00, $00, $00, $00, $3e, $63, $63, $06
	byte	$1c, $30, $60, $63, $63, $3e, $18, $30, $1e, $6c, $6c, $6c, $6c, $6c, $6f, $60
	byte	$6f, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
	byte	$6c[9]
	byte	$00[5]
	byte	$7f, $60, $6f, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
	byte	$6f, $60, $7f, $00, $00, $00, $00, $00, $00, $00, $00, $18, $18, $00, $7f, $63
	byte	$61, $30, $18, $0c, $06, $43, $63, $7f, $00, $00, $00, $00, $00, $00, $18, $18
	byte	$00, $7f, $33, $18, $0c, $06, $63, $7f, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $1f, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $18, $f8, $00, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18
	byte	$18, $18, $ff, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $ff, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $18, $f8, $18, $18, $18, $18, $18, $18, $18, $18, $00, $00, $00, $00, $00
	byte	$00, $00, $ff, $00, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18
	byte	$18, $18, $ff, $18, $18, $18, $18, $18, $18, $18, $18, $63, $3e, $00, $08, $1c
	byte	$36, $63, $63, $7f, $63, $63, $63, $63, $00, $00, $00, $00, $00, $00, $63, $3e
	byte	$00, $1e, $30, $3e, $33, $33, $33, $6e, $00, $00, $00, $6c, $6c, $6c, $6c, $6c
	byte	$ec, $0c, $fc, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$fc, $0c, $ec, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
	byte	$ef, $00, $ff, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$ff, $00, $ef, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
	byte	$ec, $0c, $ec, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $00, $00, $00, $00, $00
	byte	$ff, $00, $ff, $00, $00, $00, $00, $00, $00, $00, $00, $6c, $6c, $6c, $6c, $6c
	byte	$ef, $00, $ef, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c, $00, $00, $00, $00, $00
	byte	$63, $3e, $63, $63, $63, $63, $3e, $63, $00, $00, $00, $00, $00, $00, $30, $7e
	byte	$30, $3c, $36, $33, $33, $33, $33, $6e, $00, $00, $00, $00, $00, $00, $1f, $36
	byte	$66, $66, $6f, $66, $66, $66, $36, $1f, $00, $00, $00, $36, $1c, $00, $1f, $36
	byte	$66[6]
	byte	$36, $1f, $00, $00, $00, $00, $63, $00, $7f, $66, $46, $16, $1e, $16, $06, $46
	byte	$66, $7f, $00, $00, $00, $6c, $38, $00, $38, $30, $30, $3c, $36, $33, $33, $33
	byte	$33, $6e, $00, $00, $00, $36, $1c, $00, $63, $67, $6f, $7f, $7b, $73, $63, $63
	byte	$63, $63, $00, $00, $00, $30, $18, $00, $3c, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $3c, $00, $00, $00, $3c, $66, $00, $3c, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $3c, $00, $00, $00, $00, $00, $36, $1c, $08, $00, $3e, $63, $7f, $03, $03
	byte	$63, $3e, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18, $1f, $00, $00, $00
	byte	$00[12]
	byte	$f8, $18, $18, $18, $18, $18, $18, $18, $18, $ff, $ff, $ff, $ff, $ff, $ff, $ff
	byte	$ff[9]
	byte	$00[7]
	byte	$ff[9]
	byte	$00, $00, $00, $7e, $7e, $5a, $18, $18, $18, $18, $18, $18, $3c, $18, $30, $1e
	byte	$1c, $36, $1c, $63, $63, $63, $63, $63, $63, $63, $63, $63, $3e, $00, $00, $00
	byte	$ff[7]
	byte	$00[9]
	byte	$30, $18, $00, $3e, $63, $63, $63, $63, $63, $63, $63, $63, $3e, $00, $00, $00
	byte	$00, $00, $00, $1e, $33, $33, $33, $1b, $33, $63, $63, $63, $33, $00, $00, $00
	byte	$1c, $36, $00, $3e, $63, $63, $63, $63, $63, $63, $63, $63, $3e, $00, $00, $00
	byte	$30, $18, $00, $63, $67, $6f, $7f, $7b, $73, $63, $63, $63, $63, $00, $00, $00
	byte	$00, $00, $60, $30, $18, $00, $3b, $66, $66, $66, $66, $66, $66, $00, $00, $00
	byte	$00, $00, $36, $1c, $08, $00, $3b, $66, $66, $66, $66, $66, $66, $00, $00, $00
	byte	$36, $1c, $00, $3e, $63, $63, $06, $1c, $30, $60, $63, $63, $3e, $00, $00, $00
	byte	$00, $00, $36, $1c, $08, $00, $3e, $63, $06, $1c, $30, $63, $3e, $00, $00, $00
	byte	$30, $18, $00, $3f, $66, $66, $66, $3e, $36, $66, $66, $66, $6f, $00, $00, $00
	byte	$30, $18, $00, $63, $63, $63, $63, $63, $63, $63, $63, $63, $3e, $00, $00, $00
	byte	$00, $00, $60, $30, $18, $00, $3b, $6e, $66, $06, $06, $06, $0f, $00, $00, $00
	byte	$66, $33, $00, $63, $63, $63, $63, $63, $63, $63, $63, $63, $3e, $00, $00, $00
	byte	$00, $00, $60, $30, $18, $00, $63, $63, $63, $63, $63, $63, $7e, $60, $30, $1f
	byte	$30, $18, $00, $66, $66, $66, $66, $3c, $18, $18, $18, $18, $3c, $00, $00, $00
	byte	$00, $00, $00, $08, $0c, $0c, $3f, $0c, $0c, $0c, $0c, $6c, $38, $18, $30, $1e
	byte	$30, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[8]
	byte	$7f, $00, $00, $00, $00, $00, $00, $00, $66, $33, $00, $00, $00, $00, $00, $00
	byte	$00[21]
	byte	$0c, $06, $3c, $36, $1c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $63, $3e, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $00, $3e, $63, $06, $1c, $36, $63, $63, $36, $1c, $30, $63, $3e
	byte	$00[8]
	byte	$18, $00, $7e, $00, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[8]
	byte	$18, $30, $1e, $00, $00, $00, $1c, $36, $36, $1c, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $00, $63, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $18, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[5]
	byte	$cc, $66, $33, $00, $33, $33, $33, $33, $33, $33, $6e, $00, $00, $00, $36, $1c
	byte	$00, $3f, $66, $66, $66, $3e, $36, $66, $66, $66, $6f, $00, $00, $00, $00, $00
	byte	$36, $1c, $08, $00, $3b, $6e, $66, $06, $06, $06, $0f, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $7e, $7e, $7e, $7e, $7e, $7e, $7e, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
'-' st_font        file "st4font.def"
	byte	$00[55]
	byte	$ff, $ff, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18
	byte	$18[9]
	byte	$00[7]
	byte	$ff, $ff, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$ff, $ff, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18
	byte	$1f, $1f, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$f8, $f8, $18, $18, $18, $18, $18, $18, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$1f, $1f, $18, $18, $18, $18, $18, $18, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$f8, $f8, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$1f, $1f, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18
	byte	$f8, $f8, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18
	byte	$ff, $ff, $18, $18, $18, $18, $18, $18, $18, $00, $00, $18, $3c, $7e, $66, $66
	byte	$66, $7e, $7e, $66, $66, $66, $66, $30, $18, $00, $00, $7e, $7e, $06, $06, $3e
	byte	$3e, $06, $06, $06, $06, $7e, $7e, $18, $0c, $30, $18, $3c, $7e, $66, $66, $06
	byte	$06, $06, $06, $66, $66, $7e, $3c, $00, $00, $30, $18, $66, $66, $66, $6e, $6e
	byte	$7e, $7e, $76, $76, $66, $66, $66, $00, $00, $30, $18, $7c, $7e, $06, $06, $0e
	byte	$1c, $38, $70, $60, $60, $7e, $3e, $00, $00, $30, $18, $7e, $7e, $30, $30, $18
	byte	$18, $0c, $0c, $06, $06, $7e, $7e, $00, $00, $18, $18, $00, $7e, $7e, $30, $30
	byte	$18, $18, $0c, $0c, $06, $7e, $7e, $00, $00, $30, $18, $3c, $7e, $66, $66, $66
	byte	$66[5]
	byte	$7e, $3c, $00, $00, $00, $00, $06, $06, $06, $06, $16, $1e, $0e, $06, $06, $06
	byte	$7e, $7e, $00, $00, $00, $00, $00, $00, $00, $3c, $7c, $60, $7c, $7e, $66, $66
	byte	$7e, $7c, $30, $18, $00, $00, $00, $00, $00, $3c, $7e, $66, $66, $7e, $06, $06
	byte	$7e, $7c, $18, $0c, $00, $00, $30, $18, $00, $3c, $3e, $06, $06, $06, $06, $06
	byte	$7e, $7c, $00, $00, $00, $00, $30, $18, $00, $3e, $7e, $66, $66, $66, $66, $66
	byte	$66, $66, $00, $00, $00, $00, $30, $18, $00, $7c, $7e, $06, $0e, $3c, $70, $60
	byte	$7e, $3e, $00, $00, $00, $00, $30, $18, $00, $7e, $7e, $30, $18, $18, $0c, $0c
	byte	$7e, $7e, $00, $00, $00, $00, $18, $18, $00, $7e, $7e, $30, $18, $18, $0c, $0c
	byte	$7e, $7e, $00, $00, $00, $00, $30, $18, $00, $3c, $7e, $66, $66, $66, $66, $66
	byte	$7e, $3c, $00, $00, $00, $00, $1c, $1c, $18, $18, $38, $3c, $1c, $18, $18, $18
	byte	$3c, $3c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00[6]
	byte	$18[8]
	byte	$00, $00, $18, $18, $00, $00, $00, $00, $66, $66, $66, $66, $00, $00, $00, $00
	byte	$00[9]
	byte	$66, $66, $ff, $ff, $66, $66, $ff, $ff, $66, $66, $00, $00, $00, $00, $18, $18
	byte	$7c, $7e, $06, $06, $3e, $7c, $60, $60, $7e, $3e, $18, $18, $00, $00, $00, $66
	byte	$66, $30, $30, $18, $18, $0c, $0c, $66, $66, $00, $00, $00, $00, $00, $3c, $7e
	byte	$66, $66, $3c, $1c, $1c, $fc, $fe, $66, $66, $fe, $fc, $00, $00, $00, $00, $18
	byte	$18, $18, $18, $18, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $30
	byte	$18, $1c, $0c, $0c, $0c, $0c, $0c, $0c, $1c, $18, $30, $00, $00, $00, $00, $0c
	byte	$18, $38, $30, $30, $30, $30, $30, $30, $38, $18, $0c, $00, $00, $00, $00, $00
	byte	$66, $66, $3c, $3c, $ff, $ff, $3c, $3c, $66, $66, $00, $00, $00, $00, $00, $00
	byte	$00, $18, $18, $18, $7e, $7e, $18, $18, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$00[6]
	byte	$18[5]
	byte	$0c, $04, $00, $00, $00, $00, $00, $00, $7e, $7e, $00, $00, $00, $00, $00, $00
	byte	$00[13]
	byte	$18, $18, $18, $00, $00, $00, $00, $60, $60, $60, $30, $30, $18, $18, $0c, $0c
	byte	$06, $06, $06, $00, $00, $00, $00, $3c, $7e, $66, $66, $66, $76, $6e, $66, $66
	byte	$66, $7e, $3c, $00, $00, $00, $00, $18, $18, $1c, $1c, $18, $18, $18, $18, $18
	byte	$18, $7e, $7e, $00, $00, $00, $00, $3c, $7e, $66, $66, $30, $30, $18, $18, $0c
	byte	$0c, $7e, $7e, $00, $00, $00, $00, $7e, $7e, $30, $30, $18, $18, $30, $30, $66
	byte	$66, $7e, $3c, $00, $00, $00, $00, $30, $30, $38, $38, $3c, $3c, $36, $36, $7e
	byte	$7e, $30, $30, $00, $00, $00, $00, $7e, $7e, $06, $06, $3e, $7e, $60, $60, $60
	byte	$66, $7e, $3c, $00, $00, $00, $00, $38, $3c, $0e, $06, $06, $3e, $7e, $66, $66
	byte	$66, $7e, $3c, $00, $00, $00, $00, $7e, $7e, $60, $60, $30, $30, $18, $18, $0c
	byte	$0c, $0c, $0c, $00, $00, $00, $00, $3c, $7e, $66, $66, $3c, $3c, $66, $66, $66
	byte	$66, $7e, $3c, $00, $00, $00, $00, $3c, $7e, $66, $66, $7e, $7c, $60, $60, $60
	byte	$70, $3c, $1c, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $00, $00, $00
	byte	$18, $18, $18, $00, $00, $00, $00, $00, $00, $00, $18, $18, $18, $00, $00, $18
	byte	$18, $18, $18, $0c, $04, $00, $00, $00, $70, $38, $1c, $0e, $07, $0e, $1c, $38
	byte	$70, $00, $00, $00, $00, $00, $00, $00, $00, $00, $7e, $7e, $00, $00, $7e, $7e
	byte	$00[8]
	byte	$0e, $1c, $38, $70, $e0, $70, $38, $1c, $0e, $00, $00, $00, $00, $00, $00, $3c
	byte	$7e, $66, $66, $30, $30, $18, $18, $18, $00, $18, $18, $00, $00, $00, $00, $3c
	byte	$7e, $66, $66, $66, $66, $36, $06, $66, $66, $7e, $3c, $00, $00, $00, $00, $18
	byte	$3c, $7e, $66, $66, $66, $7e, $7e, $66, $66, $66, $66, $00, $00, $00, $00, $3e
	byte	$7e, $66, $66, $7e, $3e, $66, $66, $66, $66, $7e, $3e, $00, $00, $00, $00, $3c
	byte	$7e, $66, $66, $06, $06, $06, $06, $66, $66, $7e, $3c, $00, $00, $00, $00, $3e
	byte	$7e, $66, $66, $66, $66, $66, $66, $66, $66, $7e, $3e, $00, $00, $00, $00, $7e
	byte	$7e, $06, $06, $3e, $3e, $06, $06, $06, $06, $7e, $7e, $00, $00, $00, $00, $7e
	byte	$7e, $06, $06, $3e, $3e, $06, $06, $06, $06, $06, $06, $00, $00, $00, $00, $7c
	byte	$7e, $06, $06, $76, $76, $66, $66, $66, $66, $7e, $3c, $00, $00, $00, $00, $66
	byte	$66, $66, $66, $7e, $7e, $66, $66, $66, $66, $66, $66, $00, $00, $00, $00, $7e
	byte	$7e, $18, $18, $18, $18, $18, $18, $18, $18, $7e, $7e, $00, $00, $00, $00, $60
	byte	$60[7]
	byte	$66, $66, $7e, $3c, $00, $00, $00, $00, $66, $66, $36, $36, $1e, $1e, $36, $36
	byte	$66, $66, $c6, $c6, $00, $00, $00, $00, $06, $06, $06, $06, $06, $06, $06, $06
	byte	$06, $06, $7e, $7e, $00, $00, $00, $00, $c6, $c6, $ee, $ee, $fe, $d6, $d6, $c6
	byte	$c6, $c6, $c6, $c6, $00, $00, $00, $00, $66, $66, $66, $6e, $6e, $7e, $7e, $76
	byte	$76, $66, $66, $66, $00, $00, $00, $00, $3c, $7e, $66, $66, $66, $66, $66, $66
	byte	$66, $66, $7e, $3c, $00, $00, $00, $00, $3e, $7e, $66, $66, $66, $66, $7e, $3e
	byte	$06, $06, $06, $06, $00, $00, $00, $00, $3c, $7e, $66, $66, $66, $66, $66, $66
	byte	$66, $56, $3e, $6c, $00, $00, $00, $00, $3e, $7e, $66, $66, $66, $7e, $3e, $36
	byte	$66, $66, $c6, $c6, $00, $00, $00, $00, $7c, $7e, $06, $06, $0e, $1c, $38, $70
	byte	$60, $60, $7e, $3e, $00, $00, $00, $00, $7e, $7e, $18, $18, $18, $18, $18, $18
	byte	$18, $18, $18, $18, $00, $00, $00, $00, $66, $66, $66, $66, $66, $66, $66, $66
	byte	$66, $66, $7e, $3c, $00, $00, $00, $00, $66, $66, $66, $66, $66, $66, $66, $66
	byte	$3c, $3c, $18, $18, $00, $00, $00, $00, $c6, $c6, $c6, $c6, $c6, $d6, $d6, $fe
	byte	$fe, $ee, $c6, $82, $00, $00, $00, $00, $66, $66, $66, $3c, $3c, $18, $18, $3c
	byte	$3c, $66, $66, $66, $00, $00, $00, $00, $66, $66, $66, $66, $66, $3c, $3c, $18
	byte	$18, $18, $18, $18, $00, $00, $00, $00, $7e, $7e, $30, $30, $18, $18, $0c, $0c
	byte	$06, $06, $7e, $7e, $00, $00, $00, $00, $3c, $3c, $0c, $0c, $0c, $0c, $0c, $0c
	byte	$0c, $0c, $3c, $3c, $00, $00, $00, $00, $06, $06, $0c, $0c, $18, $18, $30, $30
	byte	$60, $60, $c0, $c0, $00, $00, $00, $00, $3c, $3c, $30, $30, $30, $30, $30, $30
	byte	$30, $30, $3c, $3c, $00, $00, $00, $00, $18, $18, $3c, $3c, $66, $66, $00, $00
	byte	$00[18]
	byte	$fe, $fe, $00, $00, $00, $00, $0c, $0c, $18, $18, $00, $00, $00, $00, $00, $00
	byte	$00[9]
	byte	$3c, $7c, $60, $7c, $7e, $66, $66, $7e, $7c, $00, $00, $00, $00, $06, $06, $06
	byte	$3e, $7e, $66, $66, $66, $66, $66, $7e, $3e, $00, $00, $00, $00, $00, $00, $00
	byte	$3c, $3e, $06, $06, $06, $06, $06, $7e, $7c, $00, $00, $00, $00, $60, $60, $60
	byte	$7c, $7e, $66, $66, $66, $66, $66, $7e, $7c, $00, $00, $00, $00, $00, $00, $00
	byte	$3c, $7e, $66, $66, $7e, $06, $06, $7e, $7c, $00, $00, $00, $00, $70, $78, $18
	byte	$18, $7e, $7e, $18, $18, $18, $18, $18, $18, $00, $00, $00, $00, $00, $00, $00
	byte	$7c, $7e, $66, $66, $66, $66, $7e, $7c, $60, $7e, $3e, $00, $00, $06, $06, $06
	byte	$3e, $7e, $66, $66, $66, $66, $66, $66, $66, $00, $00, $00, $00, $18, $18, $00
	byte	$1c, $1c, $18, $18, $18, $18, $18, $3c, $3c, $00, $00, $00, $00, $30, $30, $00
	byte	$30[9]
	byte	$3e, $1e, $00, $00, $06, $06, $06, $36, $36, $1e, $1e, $1e, $36, $36, $66, $66
	byte	$00, $00, $00, $00, $1c, $1c, $18, $18, $18, $18, $18, $18, $18, $18, $3c, $3c
	byte	$00[7]
	byte	$6c, $fe, $fe, $d6, $d6, $c6, $c6, $c6, $c6, $00, $00, $00, $00, $00, $00, $00
	byte	$3e, $7e, $66, $66, $66, $66, $66, $66, $66, $00, $00, $00, $00, $00, $00, $00
	byte	$3c, $7e, $66, $66, $66, $66, $66, $7e, $3c, $00, $00, $00, $00, $00, $00, $00
	byte	$3e, $7e, $66, $66, $66, $66, $66, $7e, $3e, $06, $06, $00, $00, $00, $00, $00
	byte	$7c, $7e, $66, $66, $66, $66, $66, $7e, $7c, $60, $60, $00, $00, $00, $00, $00
	byte	$3e, $7e, $66, $06, $06, $06, $06, $06, $06, $00, $00, $00, $00, $00, $00, $00
	byte	$7c, $7e, $06, $0e, $3c, $70, $60, $7e, $3e, $00, $00, $00, $00, $00, $18, $18
	byte	$7e, $7e, $18, $18, $18, $18, $18, $78, $70, $00, $00, $00, $00, $00, $00, $00
	byte	$66[7]
	byte	$7e, $7c, $00, $00, $00, $00, $00, $00, $00, $66, $66, $66, $66, $66, $3c, $3c
	byte	$18, $18, $00, $00, $00, $00, $00, $00, $00, $c6, $c6, $d6, $d6, $fe, $fe, $ee
	byte	$c6, $82, $00, $00, $00, $00, $00, $00, $00, $66, $66, $3c, $3c, $18, $3c, $3c
	byte	$66, $66, $00, $00, $00, $00, $00, $00, $00, $66, $66, $66, $66, $66, $66, $7e
	byte	$7c, $60, $7e, $3e, $00, $00, $00, $00, $00, $7e, $7e, $30, $18, $18, $0c, $0c
	byte	$7e, $7e, $00, $00, $00, $00, $30, $18, $18, $18, $18, $0c, $0c, $18, $18, $18
	byte	$18, $30, $00, $00, $00, $00, $18, $18, $18, $18, $18, $18, $18, $18, $18, $18
	byte	$18, $18, $00, $00, $00, $00, $0c, $18, $18, $18, $18, $30, $30, $18, $18, $18
	byte	$18, $0c, $00, $00, $00, $00, $6c, $7e, $36, $00, $00, $00, $00, $00, $00, $00
	byte	$00[9]
	byte	$18, $18, $18, $18, $18, $18, $00, $00, $00, $00, $00
'-' twocolors      long  $00000000,$FFFFFF00
	byte	$00, $00, $00, $00, $00, $ff, $ff, $ff
'-' fourcolors     long  $00000000,$80808000,$FF000000,$FFFFFF00 'black,red,gray,white
	byte	$00, $00, $00, $00, $00, $80, $80, $80, $00, $00, $00, $ff, $00, $ff, $ff, $ff
'-' vga16          long  $00000000,$00008000,$00800000,$00808000,$80000000,$80008000,$80400000,$AAAAAA00,$55555500,$0000FF00,$00FF0000,$00FFFF00,$FF000000,$FF00FF00,$FFFF0000,$FFFFFF00
	byte	$00[5]
	byte	$80, $00, $00, $00, $00, $80, $00, $00, $80, $80, $00, $00, $00, $00, $80, $00
	byte	$80, $00, $80, $00, $00, $40, $80, $00, $aa, $aa, $aa, $00, $55, $55, $55, $00
	byte	$ff, $00, $00, $00, $00, $ff, $00, $00, $ff, $ff, $00, $00, $00, $00, $ff, $00
	byte	$ff, $00, $ff, $00, $00, $ff, $ff, $00, $ff, $ff, $ff
'-' ataripalette   file "ataripalettep2.def"
	byte	$00[5]
	byte	$11, $11, $11, $00, $22, $22, $22, $00, $33, $33, $33, $00, $44, $44, $44, $00
	byte	$55, $55, $55, $00, $66, $66, $66, $00, $77, $77, $77, $00, $88, $88, $88, $00
	byte	$99, $99, $99, $00, $aa, $aa, $aa, $00, $bb, $bb, $bb, $00, $cc, $cc, $cc, $00
	byte	$dd, $dd, $dd, $00, $ee, $ee, $ee, $00, $ff, $ff, $ff, $00, $00, $0a, $20, $00
	byte	$00, $14, $40, $00, $00, $1e, $60, $00, $00, $28, $80, $00, $00, $32, $9f, $00
	byte	$00, $3c, $bf, $00, $00, $46, $df, $00, $00, $50, $ff, $00, $1c, $63, $ff, $00
	byte	$39, $77, $ff, $00, $55, $8a, $ff, $00, $71, $9e, $ff, $00, $8e, $b1, $ff, $00
	byte	$aa, $c5, $ff, $00, $c6, $d8, $ff, $00, $e3, $ec, $ff, $00, $00, $00, $20, $00
	byte	$00, $00, $40, $00, $00, $00, $60, $00, $00, $00, $80, $00, $00, $00, $9f, $00
	byte	$00, $00, $bf, $00, $00, $00, $df, $00, $00, $00, $ff, $00, $1c, $1c, $ff, $00
	byte	$39, $39, $ff, $00, $55, $55, $ff, $00, $71, $71, $ff, $00, $8e, $8e, $ff, $00
	byte	$aa, $aa, $ff, $00, $c6, $c6, $ff, $00, $e3, $e3, $ff, $00, $10, $00, $20, $00
	byte	$20, $00, $40, $00, $30, $00, $60, $00, $40, $00, $80, $00, $50, $00, $9f, $00
	byte	$60, $00, $bf, $00, $70, $00, $df, $00, $80, $00, $ff, $00, $8e, $1c, $ff, $00
	byte	$9c, $39, $ff, $00, $aa, $55, $ff, $00, $b8, $71, $ff, $00, $c7, $8e, $ff, $00
	byte	$d5, $aa, $ff, $00, $e3, $c6, $ff, $00, $f1, $e3, $ff, $00, $20, $00, $20, $00
	byte	$40, $00, $40, $00, $60, $00, $60, $00, $80, $00, $80, $00, $9f, $00, $9f, $00
	byte	$bf, $00, $bf, $00, $df, $00, $df, $00, $ff, $00, $ff, $00, $ff, $1c, $ff, $00
	byte	$ff, $39, $ff, $00, $ff, $55, $ff, $00, $ff, $71, $ff, $00, $ff, $8e, $ff, $00
	byte	$ff, $aa, $ff, $00, $ff, $c6, $ff, $00, $ff, $e3, $ff, $00, $20, $00, $10, $00
	byte	$40, $00, $20, $00, $60, $00, $30, $00, $80, $00, $40, $00, $9f, $00, $50, $00
	byte	$bf, $00, $60, $00, $df, $00, $70, $00, $ff, $00, $80, $00, $ff, $1c, $8e, $00
	byte	$ff, $39, $9c, $00, $ff, $55, $aa, $00, $ff, $71, $b8, $00, $ff, $8e, $c7, $00
	byte	$ff, $aa, $d5, $00, $ff, $c6, $e3, $00, $ff, $e3, $f1, $00, $20, $00, $00, $00
	byte	$40, $00, $00, $00, $60, $00, $00, $00, $80, $00, $00, $00, $9f, $00, $00, $00
	byte	$bf, $00, $00, $00, $df, $00, $00, $00, $ff, $00, $00, $00, $ff, $1c, $1c, $00
	byte	$ff, $39, $39, $00, $ff, $55, $55, $00, $ff, $71, $71, $00, $ff, $8e, $8e, $00
	byte	$ff, $aa, $aa, $00, $ff, $c6, $c6, $00, $ff, $e3, $e3, $00, $20, $08, $00, $00
	byte	$40, $10, $00, $00, $60, $18, $00, $00, $80, $20, $00, $00, $9f, $28, $00, $00
	byte	$bf, $30, $00, $00, $df, $38, $00, $00, $ff, $40, $00, $00, $ff, $55, $1c, $00
	byte	$ff, $6a, $39, $00, $ff, $80, $55, $00, $ff, $95, $71, $00, $ff, $aa, $8e, $00
	byte	$ff, $bf, $aa, $00, $ff, $d5, $c6, $00, $ff, $ea, $e3, $00, $20, $10, $00, $00
	byte	$40, $20, $00, $00, $60, $30, $00, $00, $80, $40, $00, $00, $9f, $50, $00, $00
	byte	$bf, $60, $00, $00, $df, $70, $00, $00, $ff, $80, $00, $00, $ff, $8e, $1c, $00
	byte	$ff, $9c, $39, $00, $ff, $aa, $55, $00, $ff, $b8, $71, $00, $ff, $c7, $8e, $00
	byte	$ff, $d5, $aa, $00, $ff, $e3, $c6, $00, $ff, $f1, $e3, $00, $20, $18, $00, $00
	byte	$40, $30, $00, $00, $60, $48, $00, $00, $80, $60, $00, $00, $9f, $78, $00, $00
	byte	$bf, $90, $00, $00, $df, $a8, $00, $00, $ff, $c0, $00, $00, $ff, $c7, $1c, $00
	byte	$ff, $ce, $39, $00, $ff, $d5, $55, $00, $ff, $dc, $71, $00, $ff, $e3, $8e, $00
	byte	$ff, $ea, $aa, $00, $ff, $f1, $c6, $00, $ff, $f8, $e3, $00, $18, $20, $00, $00
	byte	$30, $40, $00, $00, $48, $60, $00, $00, $60, $80, $00, $00, $78, $9f, $00, $00
	byte	$90, $bf, $00, $00, $a8, $df, $00, $00, $c0, $ff, $00, $00, $c7, $ff, $1c, $00
	byte	$ce, $ff, $39, $00, $d5, $ff, $55, $00, $dc, $ff, $71, $00, $e3, $ff, $8e, $00
	byte	$ea, $ff, $aa, $00, $f1, $ff, $c6, $00, $f8, $ff, $e3, $00, $00, $20, $00, $00
	byte	$00, $40, $00, $00, $00, $60, $00, $00, $00, $80, $00, $00, $00, $9f, $00, $00
	byte	$00, $bf, $00, $00, $00, $df, $00, $00, $00, $ff, $00, $00, $1c, $ff, $1c, $00
	byte	$39, $ff, $39, $00, $55, $ff, $55, $00, $71, $ff, $71, $00, $8e, $ff, $8e, $00
	byte	$aa, $ff, $aa, $00, $c6, $ff, $c6, $00, $e3, $ff, $e3, $00, $00, $20, $0a, $00
	byte	$00, $40, $14, $00, $00, $60, $1e, $00, $00, $80, $28, $00, $00, $9f, $32, $00
	byte	$00, $bf, $3c, $00, $00, $df, $46, $00, $00, $ff, $50, $00, $1c, $ff, $63, $00
	byte	$39, $ff, $77, $00, $55, $ff, $8a, $00, $71, $ff, $9e, $00, $8e, $ff, $b1, $00
	byte	$aa, $ff, $c5, $00, $c6, $ff, $d8, $00, $e3, $ff, $ec, $00, $00, $20, $14, $00
	byte	$00, $40, $28, $00, $00, $60, $3c, $00, $00, $80, $50, $00, $00, $9f, $64, $00
	byte	$00, $bf, $78, $00, $00, $df, $8c, $00, $00, $ff, $a0, $00, $1c, $ff, $ab, $00
	byte	$39, $ff, $b5, $00, $55, $ff, $c0, $00, $71, $ff, $ca, $00, $8e, $ff, $d5, $00
	byte	$aa, $ff, $df, $00, $c6, $ff, $ea, $00, $e3, $ff, $f4, $00, $00, $20, $20, $00
	byte	$00, $40, $40, $00, $00, $60, $60, $00, $00, $80, $80, $00, $00, $9f, $9f, $00
	byte	$00, $bf, $bf, $00, $00, $df, $df, $00, $00, $ff, $ff, $00, $1c, $ff, $ff, $00
	byte	$39, $ff, $ff, $00, $55, $ff, $ff, $00, $71, $ff, $ff, $00, $8e, $ff, $ff, $00
	byte	$aa, $ff, $ff, $00, $c6, $ff, $ff, $00, $e3, $ff, $ff, $00, $00, $14, $20, $00
	byte	$00, $28, $40, $00, $00, $3c, $60, $00, $00, $50, $80, $00, $00, $64, $9f, $00
	byte	$00, $78, $bf, $00, $00, $8c, $df, $00, $00, $a0, $ff, $00, $1c, $ab, $ff, $00
	byte	$39, $b5, $ff, $00, $55, $c0, $ff, $00, $71, $ca, $ff, $00, $8e, $d5, $ff, $00
	byte	$aa, $df, $ff, $00, $c6, $ea, $ff, $00, $e3, $f4, $ff
'-' '**********************************************************************************
'-' '
'-' '        Timings and colors definitions
'-' '
'-' '**********************************************************************************
'-' 
'-'    'streamer sets for text mode, to add to timings[0..5]
'-' 
'-' 
'-' '                     bf.hs, hs,  bf.vis  visible, lr bord, pixel, ud bord,  up p., vsync, down p., mode, cpl, scanlines,  clock,                  hubset                  total vis lines
'-' timings000      long   16,   80,    20,    1024,    112,     8,     48,      16,      16,    16,      0,  100,   480,     354693878,   %1_110000__11_0110_1100__1111_1011,   576
	byte	$10, $00, $00, $00, $50, $00, $00, $00, $14, $00, $00, $00, $00, $04, $00, $00
	byte	$70, $00, $00, $00, $08, $00, $00, $00, $30, $00, $00, $00, $10, $00, $00, $00
	byte	$10, $00, $00, $00, $10, $00, $00, $00, $00, $00, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $f6, $32, $24, $15, $fb, $6c, $c3, $01, $40, $02, $00, $00
'-' timings064      long   18,   48,    16,     944,     24,     8,     24,      24,      32,    24,     64,  112,   496,     319215686,   %1_110010__11_0010_1101__1111_1011,   544
	byte	$12, $00, $00, $00, $30, $00, $00, $00, $10, $00, $00, $00, $b0, $03, $00, $00
	byte	$18, $00, $00, $00, $08, $00, $00, $00, $18, $00, $00, $00, $18, $00, $00, $00
	byte	$20, $00, $00, $00, $18, $00, $00, $00, $40, $00, $00, $00, $70, $00, $00, $00
	byte	$f0, $01, $00, $00, $46, $d8, $06, $13, $fb, $2d, $cb, $01, $20, $02, $00, $00
'-' timings128      long   16,   64,    16,     816,      8,     8,     8,       32,      64,    32,    128,  100,   480,     283750000,   %1_111111__11_1000_1011__1111_1011,   496
	byte	$10, $00, $00, $00, $40, $00, $00, $00, $10, $00, $00, $00, $30, $03, $00, $00
	byte	$08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00, $20, $00, $00, $00
	byte	$40, $00, $00, $00, $20, $00, $00, $00, $80, $00, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $70, $ae, $e9, $10, $fb, $8b, $ff, $01, $f0, $01, $00, $00
'-' timings192      long   16,   80,    20,    1024,      0,     8,     0,       16,      16,    16,    192,  128,   576,     354693878,   %1_110000__11_0110_1100__1111_1011,   576
	byte	$10, $00, $00, $00, $50, $00, $00, $00, $14, $00, $00, $00, $00, $04, $00, $00
	byte	$00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $10, $00, $00, $00
	byte	$10, $00, $00, $00, $10, $00, $00, $00, $c0, $00, $00, $00, $80, $00, $00, $00
	byte	$40, $02, $00, $00, $f6, $32, $24, $15, $fb, $6c, $c3, $01, $40, $02, $00, $00
'-' timings256      long   80,  160,    84,     816,      8,     8,     8,        8,      12,     8,    256,  100,   480,     357959184,   %1_110000__11_0110_0100__1111_1011,   496
	byte	$50, $00, $00, $00, $a0, $00, $00, $00, $54, $00, $00, $00, $30, $03, $00, $00
	byte	$08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00
	byte	$0c, $00, $00, $00, $08, $00, $00, $00, $00, $01, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $10, $06, $56, $15, $fb, $64, $c3, $01, $f0, $01, $00, $00
'-' timings320      long   80,   50,    80,     816,      8,     8,     8,        8,      12,     8,    320,  100,   480,     322162162,   %1_100100__10_0101_0011__1111_1011,   496
	byte	$50, $00, $00, $00, $32, $00, $00, $00, $50, $00, $00, $00, $30, $03, $00, $00
	byte	$08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00
	byte	$0c, $00, $00, $00, $08, $00, $00, $00, $40, $01, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $f2, $cd, $33, $13, $fb, $53, $92, $01, $f0, $01, $00, $00
'-' timings384      long   24,   48,    24,     816,      8,     8,     8,        8,      12,     8,    384,  100,   480,     286363636,   %1_010101__01_0011_1010__1111_1011,   496
	byte	$18, $00, $00, $00, $30, $00, $00, $00, $18, $00, $00, $00, $30, $03, $00, $00
	byte	$08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00, $08, $00, $00, $00
	byte	$0c, $00, $00, $00, $08, $00, $00, $00, $80, $01, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $f4, $8f, $11, $11, $fb, $3a, $55, $01, $f0, $01, $00, $00
'-' timings448      long   32,   64,    34,     896,      0,     8,     0,        8,      12,     8,    448,  112,   496,     322162162,   %1_100100__10_0101_0011__1111_1011,   496
	byte	$20, $00, $00, $00, $40, $00, $00, $00, $22, $00, $00, $00, $80, $03, $00, $00
	byte	$00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00
	byte	$0c, $00, $00, $00, $08, $00, $00, $00, $c0, $01, $00, $00, $70, $00, $00, $00
	byte	$f0, $01, $00, $00, $f2, $cd, $33, $13, $fb, $53, $92, $01, $f0, $01, $00, $00
'-' timings4096     long   88,   50,    88,     800,      0,     8,     0,        12,     20,    12,   4096,  100,   480,     322162162,   %1_100100__10_0101_0011__1111_1011,   480
	byte	$58, $00, $00, $00, $32, $00, $00, $00, $58, $00, $00, $00, $20, $03, $00, $00
	byte	$00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $0c, $00, $00, $00
	byte	$14, $00, $00, $00, $0c, $00, $00, $00, $00, $10, $00, $00, $64, $00, $00, $00
	byte	$e0, $01, $00, $00, $f2, $cd, $33, $13, $fb, $53, $92, $01, $e0, $01, $00, $00
'-'                                  
'-' vgacolors       byte   0, 117, 199, 151, 39, 71, 246, 10, 5, 121, 203, 155, 43, 75, 234, 15
	byte	$00, $75, $c7, $97, $27, $47, $f6, $0a, $05, $79, $cb, $9b, $2b, $4b, $ea, $0f
'-' 
'-' hdmi            setq    #9
	byte	$28, $12, $64, $fd
'-'                 rdlong  framebuf,  ptra                  'read pointers
	byte	$00, $e1, $06, $fb
'-' 
'-'                 wrlong  #aend,#0                         'write driver length to hub#0: DEBUG/demo
	byte	$00, $28, $6f, $fc
'-'                 setcmod #$100                            'enable HDMI mode
	byte	$3c, $00, $66, $fd
'-'                 mov     ii,#448                          '7 << 6          
	byte	$c0, $fb, $06, $f6
'-'                 add     ii,hbase
	byte	$79, $fb, $02, $f1
'-'                 drvl    ii                                 '#7<<6 + hdmi_base      ' enable HDMI pins
	byte	$58, $fa, $62, $fd
'-'        '         wrpin   ##%0000_0000_000_10110_1111_0111_10_00000_0, ii  '#7<<6 + hdmi_base      ' a '123 ohm BITDAC for pins
'-'                  wrpin   ##%0000_0000_000_00000_0000_0000_00_00000_0, ii  '#7<<6 + hdmi_base      full levels as there is 100 Ohm
	byte	$00, $00, $80, $ff, $7d, $01, $08, $fc
'-'                           'aaaa_bbbb_fff_mmmmm_mmmm_mmmm_tt_sssss_h 
'-'                 setxfrq ##$0CCCCCCC+1                   'set streamer freq to 1/10th clk
	byte	$66, $66, $86, $ff, $1d, $9a, $65, $fd
'-' 
'-' 
'-' ''--------  frame rendering main loop  ---------------------------------------------------
'-' 
'-' p101
'-'                 setq    #10
	byte	$28, $14, $64, $fd
'-'                 rdlong  framebuf,  ptra
	byte	$00, $e1, $06, $fb
'-'                 setq    #15
	byte	$28, $1e, $64, $fd
'-'                 rdlong  m_bs,modeptr                     ' read timings
	byte	$75, $9d, $02, $fb
'-'                 rdlong  border,borderptr
	byte	$72, $9b, $02, $fb
'-' 
'-'                 add     frames,#1
	byte	$01, $c6, $06, $f1
'-'                 mov     dlptr2,dlptr
	byte	$77, $f7, $02, $f6
'-' 
'-'                 rdlong  cursorx, cursorptr               ' read cursor position
	byte	$74, $c9, $02, $fb
'-'                 getbyte cursory, cursorx,#1              ' y position at byte #1
	byte	$64, $cb, $ea, $f8
'-'                 getbyte cursorsh,cursorx,#2              ' shape at byte #2
	byte	$64, $c5, $f2, $f8
'-'                 and     cursorx,#255                     ' clear the cursor x varioble from y and shape
	byte	$ff, $c8, $06, $f5
'-'  '' up porch
'-' 
'-'                 mov     hsync0,sync_000                  '
	byte	$49, $ff, $02, $f6
'-'                 mov     hsync1,sync_001
	byte	$4a, $01, $03, $f6
'-'                 callpa  i_upporch ,#blank
	byte	$37, $aa, $46, $fb
'-'                 wrlong  #0,vblankptr
	byte	$73, $01, $68, $fc
'-'                 
'-'                 testb   paletteptr,#31 wc
	byte	$1f, $ec, $16, $f4
'-'          if_nc  setq2   #255
	byte	$29, $fe, $65, $3d
'-'          if_nc  rdlong  $000, paletteptr                'read palette
	byte	$76, $01, $00, $3b
'-' 
'-' '' cursor blinking
'-' 
'-'                 testb   frames,#4 wz                     ' cursor blinks at framerate/16, todo: define
	byte	$04, $c6, $0e, $f4
'-'          if_z   mov     cursorx,#129                     ' to switch the cursor off, move it out of the screen
	byte	$81, $c8, $06, $a6
'-' 
'-' '' main screen
'-' 
'-'                 mov linenum,#0
	byte	$00, $c0, $06, $f6
'-'                 mov rcnt,#0
	byte	$00, $1a, $07, $f6
'-'                 mov rcnt2a,#0
	byte	$00, $1e, $07, $f6
'-' 
'-' 
'-' p301            cmp rcnt,#0 wz
	byte	$00, $1a, $0f, $f2
'-'         if_z    jmp #p306
	byte	$18, $00, $90, $ad
'-'                 sub rcnt,#1
	byte	$01, $1a, $87, $f1
'-'                 mov dl,rdl
	byte	$91, $f9, $02, $f6
'-'                incmod rcnt2a,rcnt2 wz
	byte	$8e, $1f, $0b, $f7
'-'    if_z        add dl,roffset  
	byte	$90, $f9, $02, $a1
'-'                 mov rdl,dl
	byte	$7c, $23, $03, $f6
'-'                 jmp #p307          
	byte	$04, $00, $90, $fd
'-'           
'-'                 
'-' p306            rdlong  dl,dlptr2
	byte	$7b, $f9, $02, $fb
'-' p307            mov     framebuf2,dl wcz                  'read a line start in the framebuffer from DL entry
	byte	$7c, $fd, $1a, $f6
'-'                 rczr    framebuf2 wcz                     'but only if not %11 at lowest bits which means special DL entry
	byte	$6a, $fc, $7a, $fd
'-'    if_nz_or_nc  jmp     #p303                        
	byte	$34, $00, $90, $7d
'-' 
'-' '' Special entry:
'-' '' - repeat                 %nnnn_nnnn_nnnn_qqqq_mmmm_mmmm_mmmm_0111    repeat the next dl line n times, after q lines add offset m
'-' '' - reload palette         %mmmm_mmmm_nnnn_nnnn_qqqq_qqqq_qqqq_1011    reload n palette entries from m color from palette_ptr+q
'-' '' - set border color       %rrrr_rrrr_gggg_gggg_bbbb_bbbb_0001_0011    set border to rgb
'-' '' - set border color       %0000_0000_0000_0000_pppp_pppp_0001_1011    set border color to palette entry #p
'-' '' todo: set horizontal scroll (if needed)
'-' 
'-'                 shl framebuf2,#2
	byte	$02, $fc, $66, $f0
'-'                 getnib dlc,framebuf2,#0
	byte	$7e, $25, $43, $f8
'-'                 cmp dlc,#%100 wz
	byte	$04, $24, $0f, $f2
'-'   
'-'                 
'-'                 add dlptr2,#4
	byte	$04, $f6, $06, $f1
'-'                              if_nz  jmp #p301  '' now ignore unknown instruction 
	byte	$bc, $ff, $9f, $5d
'-'                  rdlong rdl,dlptr2
	byte	$7b, $23, $03, $fb
'-'                  getword rcnt,framebuf2,#1 
	byte	$7e, $1b, $3b, $f9
'-'                  shr rcnt,#4
	byte	$04, $1a, $47, $f0
'-'              
'-'                  getnib rcnt2,framebuf2,#4
	byte	$7e, $1d, $63, $f8
'-'                  getword roffset,framebuf2,#0
	byte	$7e, $21, $33, $f9
'-'                 
'-'                  shr roffset,#4
	byte	$04, $20, $47, $f0
'-'                  shl roffset,#12
	byte	$0c, $20, $67, $f0
'-'   
'-'                  jmp #p301
	byte	$9c, $ff, $9f, $fd
'-'                  
'-'                  
'-' p303           ' mov     framebuf2,dl                    ' read a line start in the framebuffer from DL entry
'-'                 shr     framebuf2,#12
	byte	$0c, $fc, $46, $f0
'-'                 shl     framebuf2,#2
	byte	$02, $fc, $66, $f0
'-' 
'-'                 getbyte t1,dl,#0
	byte	$7c, $05, $e3, $f8
'-'                 cmp     t1,#0 wz
	byte	$00, $04, $0f, $f2
'-'     if_z        jmp     #borderline
	byte	$34, $00, $90, $ad
'-' 
'-'                  testb   dl,#0  wc     ' bit 0 set = text OR extended:TODO
	byte	$00, $f8, $16, $f4
'-'           if_c   jmp     #textline
	byte	$50, $00, $90, $cd
'-'           if_nc  jmp     #graphline
	byte	$50, $02, $90, $3d
'-' '
'-' p302            add     linenum,#1
	byte	$01, $c0, $06, $f1
'-'                 add     dlptr2,#4
	byte	$04, $f6, $06, $f1
'-'                 cmp     linenum,i_totalvis  wz
	byte	$5d, $c1, $0a, $f2
'-'          if_nz  jmp     #p301
	byte	$6c, $ff, $9f, $5d
'-' 
'-' p112            wrlong  #1,vblankptr
	byte	$73, $03, $68, $fc
'-'                 callpa  i_downporch ,#blank             'bottom blanks
	byte	$07, $ae, $46, $fb
'-' 
'-'                 mov     hsync0,sync_222                 'vsync on
	byte	$4b, $ff, $02, $f6
'-'                 mov     hsync1,sync_223
	byte	$4c, $01, $03, $f6
'-'                 callpa  i_vsync,#blank                  'vertical sync blanks
	byte	$04, $ac, $46, $fb
'-'                 jmp     #p101
	byte	$f8, $fe, $9f, $fd
'-' 
'-' '' ---------------  END of frame rendering loop -------------------------------------------
'-' 
'-' 
'-' borderline      call    #hsync                      ' make a border
	byte	$14, $00, $b0, $fd
'-'                 xcont   m_vi,border
	byte	$4d, $a3, $c2, $fc
'-'                 jmp     #p302
	byte	$cc, $ff, $9f, $fd
'-' 
'-' 
'-' blank           call    #hsync                          'blank lines
	byte	$08, $00, $b0, $fd
'-'                 xcont   m_vi,hsync0
	byte	$7f, $a3, $c2, $fc
'-'         _ret_   djnz    pa,#blank
	byte	$fd, $ed, $6f, $0b
'-' 
'-' hsync           xcont   m_bs,hsync0                     'horizontal sync
	byte	$7f, $9d, $c2, $fc
'-'                 xzero   m_sn,hsync1
	byte	$80, $9f, $b2, $fc
'-'         _ret_   xcont   m_bv,hsync0
	byte	$7f, $a1, $c2, $0c
'-' 
'-' 
'-' 
'-' ''--%aaaa_aaaa_aaaa_aaaa_aazz_nnnn_llll_ll_01 - txt
'-'   '' aaaa_aaaa_aaaa_aaaa_aazz_rrrr_rrrr_cc_10 - graph
'-'   '' aaaa_aaaa_aaaa-aaaa_aarr_rrrr_rrrr_rr_11 - extended, next long to read
'-' 
'-' '' Display a text line DL[31..12]=addr, nibble #1=textline, zoom: todo
'-' 
'-' textline        mov     cursorpos2,cursorx              ' we need another var for cursor as this code will repeat 16x for every char line
	byte	$64, $cf, $02, $f6
'-' 
'-'                 getnib  fontline,dl,#2                 ' fontline is 0 to 15, a line in font def
	byte	$7c, $03, $53, $f8
'-'                 getnib  zoom, dl,#3
	byte	$7c, $19, $5b, $f8
'-'                 and             zoom, #3
	byte	$03, $18, $07, $f5
'-' 
'-' 
'-' 
'-'                 mov     linestart,dl                    ' linestart will be used for checking cursor y and compute line start addr in the buffer
	byte	$7c, $bf, $02, $f6
'-'                 shr     linestart,#2                    ' scanline to char line
	byte	$02, $be, $46, $f0
'-'                 and     linestart,#63
	byte	$3f, $be, $06, $f5
'-'                 cmp     linestart,cursory wz            ' if the cursor is not here
	byte	$65, $bf, $0a, $f2
'-'           if_nz mov     cursorpos2,#129                 ' move it out of the screen
	byte	$81, $ce, $06, $56
'-' 
'-'                 call    #hsync                          ' now call hsync to gain some time between xconts
	byte	$cc, $ff, $bf, $fd
'-' 
'-'                        ' if fontline =0, get a border color
'-' 
'-' p102            getword t1,m_border,#0
	byte	$52, $05, $33, $f9
'-'                 cmp     t1, #0 wz
	byte	$00, $04, $0f, $f2
'-'           if_nz xcont   m_border,border                 ' display a left border if exists
	byte	$4d, $a5, $c2, $5c
'-' 
'-'                 cmp     fontline,cursorsh wcz           ' if the cursor have to be not displayed due to its shape
	byte	$62, $03, $1b, $f2
'-'           if_c  mov     cursorpos,#129                  ' move it out of the screen
	byte	$81, $cc, $06, $c6
'-'          if_nc  mov     cursorpos,cursorpos2
	byte	$67, $cd, $02, $36
'-'                 add     cursorpos,#1                    ' we will substract #1 below so compensate this here
	byte	$01, $cc, $06, $f1
'-'                 mov     t2,fontbuf                      ' font definition pointer
	byte	$71, $07, $03, $f6
'-'                 add     t2,fontline                     ' add a current font line
	byte	$81, $07, $03, $f1
'-'                 mov m_lut2, m_lut1
	byte	$53, $bd, $02, $f6
'-'                 add m_lut2, lutt1
	byte	$6b, $bd, $02, $f1
'-'                 mov cpl2,i_cpl
	byte	$59, $11, $03, $f6
'-' 
'-'                cmp zoom,#2 wz
	byte	$02, $18, $0f, $f2
'-'           if_z jmp #p420
	byte	$e4, $00, $90, $ad
'-'                cmp zoom,#1 wz
	byte	$01, $18, $0f, $f2
'-'           if_z jmp #p410
	byte	$64, $00, $90, $ad
'-'                 cmp zoom,#0 wz
	byte	$00, $18, $0f, $f2
'-'           if_z jmp #p400
	byte	$04, $00, $90, $ad
'-'                jmp #p430
	byte	$50, $01, $90, $fd
'-' 
'-'                    '
'-'  ''---------------------------------------------------------------------------------------------------------
'-'  p400                   rdlong  char,framebuf2          ' read a long char                          '1
	byte	$7e, $13, $03, $fb
'-'                         getbyte backcolor,char,#2       ' byte #2 - background color                '2
	byte	$89, $15, $f3, $f8
'-'                         getbyte charcolor,char,#3       ' byte #3 - foreground color                '3
	byte	$89, $17, $fb, $f8
'-'                         getbyte char,char, #0           ' word #0 - char code                       '4
	byte	$89, $13, $e3, $f8
'-'                         add     framebuf2,#4            ' point to the next long                    '5
	byte	$04, $fc, $06, $f1
'-'                         shl     char,#4                 ' 1 char=16 bytes in font def               '6
	byte	$04, $12, $67, $f0
'-'                         add     char,t2                 ' add this to font/line pointer             '7
	byte	$83, $13, $03, $f1
'-'                         rdbyte  t1,char                 ' and get 8 pixels prom there               '8
	byte	$89, $05, $c3, $fa
'-'                         sub     cursorpos,#1 wz         ' if there is a cursor                      '9
	byte	$01, $cc, $8e, $f1
'-'                   if_z  xor     t1, #$FF                ' reverse the colors                        '10
	byte	$ff, $04, $67, $a5
'-' 
'-'                         xcont m_lut2,t1
	byte	$82, $bd, $c2, $fc
'-' 
'-'                         rdlut   t5,backcolor            ' read a background color from palette      '13
	byte	$8a, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr              ' and write it to LUT #0 or #32             '14
	byte	$61, $0d, $33, $fc
'-'                         add     lutaddr,#1                                                          '15
	byte	$01, $c2, $06, $f1
'-'                         rdlut   t5,charcolor            ' the same for the foreground               '16
	byte	$8b, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr                                                          '17
	byte	$61, $0d, $33, $fc
'-'                         sub     lutaddr,#1
	byte	$01, $c2, $86, $f1
'-' 
'-'                         bitnot  m_lut2,#16                                                          '19
	byte	$10, $bc, $e6, $f4
'-'                         bitnot  m_lut1,#16                                                          '19
	byte	$10, $a6, $e6, $f4
'-'                         xor     lutaddr,#32             ' use LUT #0-1 and 32-33                    '20
	byte	$20, $c2, $66, $f5
'-' 
'-'                         djnz   cpl2,#p400
	byte	$eb, $11, $6f, $fb
'-'  p401                   jmp    #p103
	byte	$28, $01, $90, $fd
'-' 
'-' ''------------------------------------------------------------------------------------------------------------
'-' 
'-'  p410                   shr cpl2,#1
	byte	$01, $10, $47, $f0
'-' 
'-' ''---------------------------------------------------------------------------------------------------------
'-'  p412                   rdlong  char,framebuf2          ' read a long char                          '1
	byte	$7e, $13, $03, $fb
'-'                         getbyte backcolor,char,#2       ' byte #2 - background color                '2
	byte	$89, $15, $f3, $f8
'-'                         getbyte charcolor,char,#3       ' byte #3 - foreground color                '3
	byte	$89, $17, $fb, $f8
'-'                         getbyte char,char, #0           ' word #0 - char code                       '4
	byte	$89, $13, $e3, $f8
'-'                         add     framebuf2,#4            ' point to the next long                    '5
	byte	$04, $fc, $06, $f1
'-'                         shl     char,#4                 ' 1 char=16 bytes in font def               '6
	byte	$04, $12, $67, $f0
'-'                         add     char,t2                 ' add this to font/line pointer             '7
	byte	$83, $13, $03, $f1
'-'                         rdbyte  t1,char                 ' and get 8 pixels prom there               '8
	byte	$89, $05, $c3, $fa
'-'                         sub     cursorpos,#1 wz         ' if there is a cursor                      '9
	byte	$01, $cc, $8e, $f1
'-'                   if_z  xor     t1, #$FF                ' reverse the colors                        '10
	byte	$ff, $04, $67, $a5
'-' 
'-' 
'-'                         getnib t3,t1,#1                   ' 4 pixels to t3                                              '1  - +
	byte	$82, $09, $4b, $f8
'-'                         getnib t1,t1,#0                   ' 4 pixels to t1                                                      '2  - +
	byte	$82, $05, $43, $f8
'-'                         mergew t1                         ' make 01010101 from 1111                                     '3  - +
	byte	$63, $04, $63, $fd
'-'                         mul t1,#3
	byte	$03, $04, $07, $fa
'-'                         xcont m_lut2,t1
	byte	$82, $bd, $c2, $fc
'-'                         rdlut   t5,backcolor            ' read a background color from palette      '13
	byte	$8a, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr              ' and write it to LUT #0 or #32             '14
	byte	$61, $0d, $33, $fc
'-'                         add     lutaddr,#1                                                          '15
	byte	$01, $c2, $06, $f1
'-'                         rdlut   t5,charcolor            ' the same for the foreground               '16
	byte	$8b, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr                                                          '17
	byte	$61, $0d, $33, $fc
'-'                         sub     lutaddr,#1
	byte	$01, $c2, $86, $f1
'-'                         mergew t3
	byte	$63, $08, $63, $fd
'-'                         mul t3,#3
	byte	$03, $08, $07, $fa
'-'                         xcont m_lut2,t3
	byte	$84, $bd, $c2, $fc
'-' 
'-'                         bitnot  m_lut2,#16                                                          '19
	byte	$10, $bc, $e6, $f4
'-'                         bitnot  m_lut1,#16                                                          '19
	byte	$10, $a6, $e6, $f4
'-' 
'-'                         xor     lutaddr,#32             ' use LUT #0-1 and 32-33                    '20
	byte	$20, $c2, $66, $f5
'-' 
'-'                         djnz   cpl2,#p412
	byte	$e4, $11, $6f, $fb
'-'  p411                   jmp    #p103
	byte	$b0, $00, $90, $fd
'-' 
'-' ''------------------------------------------------------------------------------------------------------------
'-' 
'-'  p420                   shr cpl2,#2
	byte	$02, $10, $47, $f0
'-' 
'-' ''---------------------------------------------------------------------------------------
'-'  p422                   rdlong  char,framebuf2          ' read a long char                          '1
	byte	$7e, $13, $03, $fb
'-'                         getbyte backcolor,char,#2       ' byte #2 - background color                '2
	byte	$89, $15, $f3, $f8
'-'                         getbyte charcolor,char,#3       ' byte #3 - foreground color                '3
	byte	$89, $17, $fb, $f8
'-'                         getbyte char,char, #0           ' word #0 - char code                       '4
	byte	$89, $13, $e3, $f8
'-'                         add     framebuf2,#4            ' point to the next long                    '5
	byte	$04, $fc, $06, $f1
'-'                         shl     char,#4                 ' 1 char=16 bytes in font def               '6
	byte	$04, $12, $67, $f0
'-'                         add     char,t2                 ' add this to font/line pointer             '7
	byte	$83, $13, $03, $f1
'-'                         rdbyte  t1,char                 ' and get 8 pixels prom there               '8
	byte	$89, $05, $c3, $fa
'-'                         sub     cursorpos,#1 wz         ' if there is a cursor                      '9
	byte	$01, $cc, $8e, $f1
'-'                   if_z  xor     t1, #$FF                ' reverse the colors                        '10
	byte	$ff, $04, $67, $a5
'-' 
'-'                         mergeb t1
	byte	$61, $04, $63, $fd
'-'                         getword t3,t1,#1
	byte	$82, $09, $3b, $f9
'-'                         mul t1,#15
	byte	$0f, $04, $07, $fa
'-'                         xcont m_lut2,t1
	byte	$82, $bd, $c2, $fc
'-' 
'-'                         rdlut   t5,backcolor            ' read a background color from palette      '13
	byte	$8a, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr              ' and write it to LUT #0 or #32             '14
	byte	$61, $0d, $33, $fc
'-'                         add     lutaddr,#1                                                          '15
	byte	$01, $c2, $06, $f1
'-'                         rdlut   t5,charcolor            ' the same for the foreground               '16
	byte	$8b, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr                                                          '17
	byte	$61, $0d, $33, $fc
'-'                         sub     lutaddr,#1
	byte	$01, $c2, $86, $f1
'-' 
'-'                         getbyte t4,t1,#1        '
	byte	$82, $0b, $eb, $f8
'-'                         xcont m_lut2,t4                                                                                                           '
	byte	$85, $bd, $c2, $fc
'-' 
'-'                         mul t3,#15
	byte	$0f, $08, $07, $fa
'-'                         xcont m_lut2,t3
	byte	$84, $bd, $c2, $fc
'-' 
'-'                         getbyte t5,t3,#1
	byte	$84, $0d, $eb, $f8
'-'                         xcont m_lut2, t5
	byte	$86, $bd, $c2, $fc
'-'                         bitnot  m_lut2,#16                                                          '19
	byte	$10, $bc, $e6, $f4
'-'                         bitnot  m_lut1,#16                                                          '19
	byte	$10, $a6, $e6, $f4
'-' 
'-'                         xor     lutaddr,#32             ' use LUT #0-1 and 32-33                    '20
	byte	$20, $c2, $66, $f5
'-' 
'-'                         djnz   cpl2,#p422
	byte	$e2, $11, $6f, $fb
'-'  p421                   jmp    #p103
	byte	$30, $00, $90, $fd
'-' 
'-' '--------------------------------------------------------------------------------------------------------------
'-' 
'-'  p430                   rdlong  char,framebuf2          ' read a long char                          '1
	byte	$7e, $13, $03, $fb
'-'                         getbyte backcolor,char,#2       ' byte #2 - background color                '2
	byte	$89, $15, $f3, $f8
'-'                         getbyte charcolor,char,#3       ' byte #3 - foreground color                '3
	byte	$89, $17, $fb, $f8
'-' 
'-'                         xcont m_lut2,#0
	byte	$00, $bc, $c6, $fc
'-' 
'-'                         rdlut   t5,backcolor            ' read a background color from palette      '13
	byte	$8a, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr              ' and write it to LUT #0 or #32             '14
	byte	$61, $0d, $33, $fc
'-'                         add     lutaddr,#1                                                          '15
	byte	$01, $c2, $06, $f1
'-'                         rdlut   t5,charcolor            ' the same for the foreground               '16
	byte	$8b, $0d, $a3, $fa
'-'                         wrlut   t5,lutaddr                                                          '17
	byte	$61, $0d, $33, $fc
'-'                         sub     lutaddr,#1
	byte	$01, $c2, $86, $f1
'-' 
'-'                         djnz   cpl2,#p430
	byte	$f5, $11, $6f, $fb
'-'  p431                   jmp    #p103
	byte	$00, $00, $90, $fd
'-' 
'-' ''------------------------------------------------------------------------------------------------------------
'-' 
'-' 
'-' 
'-' p103            getword  mb2,m_border,#0
	byte	$52, $27, $33, $f9
'-'                 cmp      mb2, #0 wz
	byte	$00, $26, $0f, $f2
'-'                 if_nz    xcont   m_border,border            'display a right border if exists
	byte	$4d, $a5, $c2, $5c
'-' 
'-'                 jmp #p302
	byte	$b0, $fd, $9f, $fd
'-' 
'-' '' -------------------------------------- END of text line ---------------------------------
'-' 
'-'   '' aaaa_aaaa_aaaa_aaaa_aazz_rrrr_rrrr_cc_10 - graph - display a graphics line
'-' 
'-' graphline       call    #hsync                          ' now call hsync to gain some time between xconts
	byte	$ec, $fd, $bf, $fd
'-' 
'-' 
'-' p202            getword mb2,m_border,#0
	byte	$52, $27, $33, $f9
'-'                 cmp     mb2, #0 wz
	byte	$00, $26, $0f, $f2
'-'           if_nz xcont   m_border,border                 ' display a left border if exists
	byte	$4d, $a5, $c2, $5c
'-' 
'-' '----------------------------------------- display pixels
'-' 
'-'                 mov     m_lut2,m_lut1                   ' m_lut1 loaded from hub timing block, pixel per long
	byte	$53, $bd, $02, $f6
'-'                 mov     cpl2,i_cpl                      ' i_cpl in graphic modes is longs per line
	byte	$59, $11, $03, $f6
'-' 
'-'                 getnib  zoom, dl,#3
	byte	$7c, $19, $5b, $f8
'-'                 and             zoom, #3                        ' get a horizontal zoom for the line
	byte	$03, $18, $07, $f5
'-' 
'-'                 mov     colordepth,dl                   ' get a color depth, reuse linestart var f         '
	byte	$7c, $bf, $02, $f6
'-'                 and     colordepth,#12
	byte	$0c, $be, $06, $f5
'-' 
'-'                 cmp     colordepth,#%0000 wz            ' 1 bpp modes
	byte	$00, $be, $0e, $f2
'-'           if_z  add     m_lut2,lutg1
	byte	$6c, $bd, $02, $a1
'-'           if_z  jmp     #p240
	byte	$68, $00, $90, $ad
'-' 
'-'                 cmp     colordepth,#%0100 wz            ' 2 bpp modes
	byte	$04, $be, $0e, $f2
'-'           if_z  add     m_lut2,lutg2
	byte	$6d, $bd, $02, $a1
'-'           if_z  jmp     #p250
	byte	$9c, $00, $90, $ad
'-' 
'-'                 cmp     colordepth,#%1000 wz            ' 4 bpp modes
	byte	$08, $be, $0e, $f2
'-'           if_z  add     m_lut2,lutg4
	byte	$6e, $bd, $02, $a1
'-'           if_z  jmp     #p260
	byte	$00, $01, $90, $ad
'-' 
'-'                 add m_lut2,lutg8                        ' 8 bpp modes
	byte	$6f, $bd, $02, $f1
'-' 
'-' '' --- 8 bit color modes
'-' 
'-'                 cmp zoom, #%00 wz   '256 colors, zoom x1
	byte	$00, $18, $0f, $f2
'-'                 if_z jmp #p251      'there is an universal loop for 1x zoom at p251, saves one long of skip pattern
	byte	$54, $01, $90, $ad
'-' 
'-'                 cmp zoom, #%01 wz   '256 colors, zoom x2
	byte	$01, $18, $0f, $f2
'-'                 if_z mov skippattern,#%101010
	byte	$2a, $0e, $07, $a6
'-'                 if_z jmp #p235
	byte	$10, $00, $90, $ad
'-'  '  
'-'                 cmp zoom, #%10 wz   '256 colors, zoom x4
	byte	$02, $18, $0f, $f2
'-'                 if_z mov skippattern,#%100101
	byte	$25, $0e, $07, $a6
'-'     
'-'  
'-'                 if_nz mov skippattern,#%000101
	byte	$05, $0e, $07, $56
'-'                 if_nz shr cpl2,#1         ' if 8x zoom, 2 xconts used in one loop, so divide loop count by 2
	byte	$01, $10, $47, $50
'-'         
'-' 
'-'         
'-' p235               rdlong  char,framebuf2
	byte	$7e, $13, $03, $fb
'-'                    skipf skippattern
	byte	$32, $0e, $63, $fd
'-'                    add     framebuf2,#2             '0 1 1
	byte	$02, $fc, $06, $f1
'-'                    add     framebuf2,#1             '1 0 0
	byte	$01, $fc, $06, $f1
'-'                    movbyts char,#%01010000          '0 1 1
	byte	$50, $12, $ff, $f9
'-'                    movbyts char,#%00000000          '1 0 0
	byte	$00, $12, $ff, $f9
'-'                    xcont   m_lut2,char              '0 0 0
	byte	$89, $bd, $c2, $fc
'-'                    xcont   m_lut2,char              '1 1 0
	byte	$89, $bd, $c2, $fc
'-'                    djnz    cpl2,#p235
	byte	$f7, $11, $6f, $fb
'-' 
'-'                jmp    #p203
	byte	$20, $01, $90, $fd
'-'                   
'-' 
'-' 
'-' '' --- 1 bit color modes
'-' 
'-' p240          cmp zoom, #%00 wz     '2 colors, zoom x1
	byte	$00, $18, $0f, $f2
'-'        if_z   jmp #p251              'there is an universal loop for 1x zoom at p251, saves one long of skip pattern
	byte	$08, $01, $90, $ad
'-' 
'-'               cmp zoom, #%01 wz     '2 colors, zoom x2
	byte	$01, $18, $0f, $f2
'-'        if_z   mov skippattern,#%10011
	byte	$13, $0e, $07, $a6
'-'        if_nz  mov skippattern,#%01000
	byte	$08, $0e, $07, $56
'-' 
'-' 
'-' p241               rdword  char,framebuf2
	byte	$7e, $13, $e3, $fa
'-'                    movbyts char,#%01000100
	byte	$44, $12, $ff, $f9
'-'                    mergew  char
	byte	$63, $12, $63, $fd
'-'                    skipf skippattern
	byte	$32, $0e, $63, $fd
'-'                    movbyts char,#%01000100         ' 1 0
	byte	$44, $12, $ff, $f9
'-'                    mergew  char                    ' 1 0
	byte	$63, $12, $63, $fd
'-'                    xcont   m_lut2,char             ' 0 0
	byte	$89, $bd, $c2, $fc
'-'                    add     framebuf2,#2                    ' 0 1
	byte	$02, $fc, $06, $f1
'-'                    add     framebuf2,#1                ' 1 0
	byte	$01, $fc, $06, $f1
'-'                    djnz   cpl2,#p241
	byte	$f6, $11, $6f, $fb
'-' 
'-' 
'-'                jmp    #p203
	byte	$e0, $00, $90, $fd
'-' 
'-' '' --- 2 bit color modes
'-' 
'-' p250          cmp zoom, #%00 wz     '4 colors, zoom x1
	byte	$00, $18, $0f, $f2
'-'        if_z   jmp #p251
	byte	$c8, $00, $90, $ad
'-' 
'-'               cmp zoom, #%01 wz     '4 colors, zoom x2
	byte	$01, $18, $0f, $f2
'-'        if_z   jmp #p252
	byte	$30, $00, $90, $ad
'-' 
'-' 
'-' p254               rdbyte char,framebuf2
	byte	$7e, $13, $c3, $fa
'-'                    mov  t5,#4
	byte	$04, $0c, $07, $f6
'-' p255               shl  char,#2
	byte	$02, $12, $67, $f0
'-'                    getnib  t1,char,#2
	byte	$89, $05, $53, $f8
'-'                    and     t1,#3
	byte	$03, $04, $07, $f5
'-'                    mul     t1,#$55
	byte	$55, $04, $07, $fa
'-'                    rolbyte  t2,t1,#0
	byte	$82, $07, $03, $f9
'-'                    djnz    t5,#p255
	byte	$fa, $0d, $6f, $fb
'-'                    xcont   m_lut2,t2
	byte	$83, $bd, $c2, $fc
'-'                    add     framebuf2,#1
	byte	$01, $fc, $06, $f1
'-'                    djnz    cpl2,#p254
	byte	$f5, $11, $6f, $fb
'-'                    jmp     #p203
	byte	$a0, $00, $90, $fd
'-' 
'-' p252               rdword char,framebuf2
	byte	$7e, $13, $e3, $fa
'-'                    mov  t5,#8
	byte	$08, $0c, $07, $f6
'-' p253               shl  char,#2
	byte	$02, $12, $67, $f0
'-'                    getnib  t1,char,#4
	byte	$89, $05, $63, $f8
'-'                    and     t1,#3
	byte	$03, $04, $07, $f5
'-'                    mul     t1,#5
	byte	$05, $04, $07, $fa
'-'                    rolnib  t2,t1,#0
	byte	$82, $07, $83, $f8
'-'                    djnz    t5,#p253
	byte	$fa, $0d, $6f, $fb
'-'                    xcont   m_lut2,t2
	byte	$83, $bd, $c2, $fc
'-'                    add     framebuf2,#2
	byte	$02, $fc, $06, $f1
'-'                    djnz    cpl2,#p252
	byte	$f5, $11, $6f, $fb
'-'                    jmp     #p203
	byte	$70, $00, $90, $fd
'-' 
'-' '' ------ 4 bit color modes
'-' 
'-' p260          cmp zoom, #%00 wz     '4 colors, zoom x1, the same loop as 2bpp
	byte	$00, $18, $0f, $f2
'-'        if_z   jmp #p251
	byte	$58, $00, $90, $ad
'-' 
'-'               cmp zoom, #%01 wz     '4 colors, zoom x2
	byte	$01, $18, $0f, $f2
'-'        if_z   jmp #p262
	byte	$2c, $00, $90, $ad
'-' 
'-' 
'-' p263               rdbyte char,framebuf2
	byte	$7e, $13, $c3, $fa
'-'                            rep #5,#2
	byte	$02, $0a, $dc, $fc
'-'                              rolnib t2,char,#1
	byte	$89, $07, $8b, $f8
'-'                                  rolnib t2,char,#1
	byte	$89, $07, $8b, $f8
'-'                              rolnib t2,char,#1
	byte	$89, $07, $8b, $f8
'-'                                  rolnib t2,char,#1
	byte	$89, $07, $8b, $f8
'-'                              shl char,#4
	byte	$04, $12, $67, $f0
'-'                    xcont   m_lut2,t2
	byte	$83, $bd, $c2, $fc
'-'                    add     framebuf2,#1
	byte	$01, $fc, $06, $f1
'-'                    djnz    cpl2,#p263
	byte	$f6, $11, $6f, $fb
'-'                    jmp     #p203
	byte	$34, $00, $90, $fd
'-' 
'-' p262               rdword  char,framebuf2
	byte	$7e, $13, $e3, $fa
'-'                            rep #3,#4
	byte	$04, $06, $dc, $fc
'-'                              rolnib t2,char,#3
	byte	$89, $07, $9b, $f8
'-'                                  rolnib t2,char,#3
	byte	$89, $07, $9b, $f8
'-'                              shl char,#4
	byte	$04, $12, $67, $f0
'-'                    xcont   m_lut2,t2
	byte	$83, $bd, $c2, $fc
'-'                    add     framebuf2,#2
	byte	$02, $fc, $06, $f1
'-'                    djnz    cpl2,#p262
	byte	$f8, $11, $6f, $fb
'-'                    jmp     #p203
	byte	$10, $00, $90, $fd
'-' 
'-' ''---------- all color modes without zoom
'-' 
'-' p251               rep  #3,cpl2
	byte	$88, $07, $d8, $fc
'-'                    rdlong  char,framebuf2
	byte	$7e, $13, $03, $fb
'-'                    add     framebuf2,#4
	byte	$04, $fc, $06, $f1
'-'                    xcont   m_lut2,char
	byte	$89, $bd, $c2, $fc
'-'           
'-'  ''-----------------------------------------------------------------------------------------
'-' p203           ' getword  mb2,m_border,#0
'-'                 cmp      mb2, #0 wz
	byte	$00, $26, $0f, $f2
'-'                 if_nz    xcont   m_border,border            'display a right border if exists
	byte	$4d, $a5, $c2, $5c
'-' 
'-'                 jmp #p302
	byte	$e8, $fb, $9f, $fd
'-' 
'-' '' -------------------------------------- END of graph  line ---------------------------------
'-' 
'-' '' consts and vars
'-' 
'-' sync_000        long    %1101010100_1101010100_1101010100_10    '
	byte	$52, $4d, $35, $d5
'-' sync_001        long    %1101010100_1101010100_0010101011_10    '        hsync
	byte	$ae, $42, $35, $d5
'-' sync_222        long    %0101010100_0101010100_0101010100_10    'vsync
	byte	$52, $45, $15, $55
'-' sync_223        long    %0101010100_0101010100_1010101011_10    'vsync + hsync
	byte	$ae, $4a, $15, $55
'-' 
'-' border          long    %00000000_00011010_00101100_00000000
	byte	$00, $2c, $1a, $00
'-' 
'-' '------ these longs will be set by setmode function
'-' 
'-' m_bs            long    0        'blanks before sync
	byte	$00, $00, $00, $00
'-' m_sn            long    0        'sync
	byte	$00, $00, $00, $00
'-' m_bv            long    0        'blanks before visible
	byte	$00, $00, $00, $00
'-' m_vi            long    0        'visible pixels #
	byte	$00, $00, $00, $00
'-' m_border        long    0        'left/right borders
	byte	$00, $00, $00, $00
'-' m_lut1          long    0        'characters
	byte	$00, $00, $00, $00
'-' i_vborder       long    0        'up/down borders
	byte	$00, $00, $00, $00
'-' i_upporch       long    0        'up porch lines
	byte	$00, $00, $00, $00
'-' i_vsync         long    0        'vsync lines
	byte	$00, $00, $00, $00
'-' i_downporch     long    0        'down porch lines
	byte	$00, $00, $00, $00
'-' i_modenum       long    0        'mode #
	byte	$00, $00, $00, $00
'-' i_cpl           long    0        'chars/longs per line
	byte	$00, $00, $00, $00
'-' i_lines         long    0        'scanlines #
	byte	$00, $00, $00, $00
'-' i_clock         long    0
	byte	$00, $00, $00, $00
'-' i_hubset        long    0
	byte	$00, $00, $00, $00
'-' i_totalvis      long    0
	byte	$00, $00, $00, $00
'-' 
'-' '-------------------------------------
'-' 
'-' m_lut2          long    0
	byte	$00, $00, $00, $00
'-' 
'-' colordepth
'-' linestart       long    0
	byte	$00, $00, $00, $00
'-' linenum         long    0
	byte	$00, $00, $00, $00
'-' lutaddr         long    256
	byte	$00, $01, $00, $00
'-' 
'-' cursorsh        long    14
	byte	$0e, $00, $00, $00
'-' frames          long    0
	byte	$00, $00, $00, $00
'-' cursorx         long    0
	byte	$00, $00, $00, $00
'-' cursory         long    0
	byte	$00, $00, $00, $00
'-' cursorpos       long    0
	byte	$00, $00, $00, $00
'-' cursorpos2      long    0
	byte	$00, $00, $00, $00
'-' fontstart       long    0
	byte	$00, $00, $00, $00
'-' border2         long 0
	byte	$00, $00, $00, $00
'-' lutiv           long $70810000
	byte	$00, $00, $81, $70
'-' lutt1           long $00880000
	byte	$00, $00, $88, $00
'-' lutg1           long $00800000
	byte	$00, $00, $80, $00
'-' lutg2           long $10800000
	byte	$00, $00, $80, $10
'-' lutg4           long $20800000
	byte	$00, $00, $80, $20
'-' lutg8           long $30800000
	byte	$00, $00, $80, $30
'-' framebuf        long 0
	byte	$00, $00, $00, $00
'-' fontbuf         long 0
	byte	$00, $00, $00, $00
'-' borderptr       long 0
	byte	$00, $00, $00, $00
'-' vblankptr       long 0
	byte	$00, $00, $00, $00
'-' cursorptr       long 0
	byte	$00, $00, $00, $00
'-' modeptr         long 0
	byte	$00, $00, $00, $00
'-' paletteptr      long 0
	byte	$00, $00, $00, $00
'-' dlptr           long 0
	byte	$00, $00, $00, $00
'-' fontnumptr      res     1
'-' fontnumptr      res     1
'-' hbase           res     1
'-' hbase           res     1
'-' borderptr2      res     1
'-' borderptr2      res     1
'-' dlptr2 res 1
'-' dlptr2 res 1
'-' dl              res 1
'-' dl              res 1
'-' ii              res     1
'-' ii              res     1
'-' framebuf2       res     1
'-' framebuf2       res     1
'-' hsync0          res     1
'-' hsync0          res     1
'-' hsync1          res     1
'-' hsync1          res     1
'-' fontline        res     1
'-' fontline        res     1
'-' t1              res     1
'-' t1              res     1
'-' t2              res     1
'-' t2              res     1
'-' t3 res 1
'-' t3 res 1
'-' t4 res 1
'-' t4 res 1
'-' t5 res 1
'-' t5 res 1
'-' skippattern res 1
'-' skippattern res 1
'-' cpl2 res 1
'-' cpl2 res 1
'-' char            res     1
'-' char            res     1
'-' backcolor       res     1
'-' backcolor       res     1
'-' charcolor       res     1
'-' charcolor       res     1
'-' zoom res 1
'-' zoom res 1
'-' rcnt long 0 'dl repeat count
	byte	$00, $00, $00, $00
'-' rcnt2 long 0
	byte	$00, $00, $00, $00
'-' rcnt2a long 0
	byte	$00, $00, $00, $00
'-' roffset long 0
	byte	$00, $00, $00, $00
'-' rdl long 0  'dl repeat line
	byte	$00, $00, $00, $00
'-' dlc long 0 'dl command
	byte	$00, $00, $00, $00
'-' mb2 long 0
	byte	$00, $00, $00, $00
'-' aend             long 0
	byte	$00, $00, $00, $00
'-'                 fit     496                     '
objmem
	long	0[1]
	org	COG_BSS_START
_var01
	res	1
_var02
	res	1
_var03
	res	1
_var04
	res	1
_var05
	res	1
_var06
	res	1
_var07
	res	1
_var08
	res	1
_var09
	res	1
_var10
	res	1
_var11
	res	1
_var12
	res	1
_var13
	res	1
_var14
	res	1
_var15
	res	1
_var16
	res	1
_var17
	res	1
_var18
	res	1
_var19
	res	1
_var20
	res	1
_var21
	res	1
_var22
	res	1
_var23
	res	1
_var24
	res	1
_var25
	res	1
_var26
	res	1
_var27
	res	1
_var28
	res	1
_var29
	res	1
_var30
	res	1
_var31
	res	1
_var32
	res	1
_var33
	res	1
_var34
	res	1
_var35
	res	1
_var36
	res	1
_var37
	res	1
_var38
	res	1
_var39
	res	1
_var40
	res	1
_var41
	res	1
_var42
	res	1
_var43
	res	1
_var44
	res	1
_var45
	res	1
_var46
	res	1
_var47
	res	1
_var48
	res	1
_var49
	res	1
_var50
	res	1
_var51
	res	1
_var52
	res	1
_var53
	res	1
_var54
	res	1
_var55
	res	1
_var56
	res	1
_var57
	res	1
_var58
	res	1
_var59
	res	1
_var60
	res	1
_var61
	res	1
_var62
	res	1
_var63
	res	1
_var64
	res	1
_var65
	res	1
_var66
	res	1
_var67
	res	1
_var68
	res	1
_var69
	res	1
_var70
	res	1
_var71
	res	1
_var72
	res	1
_var73
	res	1
_var74
	res	1
_var75
	res	1
_var76
	res	1
_var77
	res	1
_var78
	res	1
_var79
	res	1
_var80
	res	1
_var81
	res	1
_var82
	res	1
_var83
	res	1
_var84
	res	1
_var85
	res	1
_var86
	res	1
_var87
	res	1
_var88
	res	1
_var89
	res	1
_var90
	res	1
_var91
	res	1
_var92
	res	1
_var93
	res	1
_var94
	res	1
arg01
	res	1
arg02
	res	1
arg03
	res	1
arg04
	res	1
arg05
	res	1
local01
	res	1
local02
	res	1
local03
	res	1
local04
	res	1
local05
	res	1
local06
	res	1
local07
	res	1
local08
	res	1
local09
	res	1
local10
	res	1
local11
	res	1
local12
	res	1
local13
	res	1
local14
	res	1
local15
	res	1
local16
	res	1
local17
	res	1
local18
	res	1
local19
	res	1
local20
	res	1
local21
	res	1
local22
	res	1
local23
	res	1
local24
	res	1
muldiva_
	res	1
muldivb_
	res	1
	fit	480
